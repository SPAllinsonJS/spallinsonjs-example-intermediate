var _A_={Container:null,Content:null,Controllers:{},Services:{},Singletons:{},_R_:{},_I_:{},Setup:{init:function(){_A_.Setup.createAppContainer(),_A_.Setup.createAppContentContainer(),_A_.Setup.verifyIsCssTransitionSupported(),_A_.Settings.splash&&_A_.Settings.splash.enabled?_A_.Splash.create(function(){_A_.Splash.load(function(){_A_.Preloader.preloadServicesAndSingletons(function(){_A_.Preloader.preloadComponents(function(){_A_.Splash.applyShowForAtLeast(function(){_A_.Splash.dismiss(function(){_A_.Setup.performInitialRouting()})})})})})}):_A_.Preloader.preloadServicesAndSingletons(function(){_A_.Setup.performInitialRouting()})},createAppContainer:function(){_A_.Container=document.createElement("SPAllinsonJS-App"),document.body.appendChild(_A_.Container)},createAppContentContainer:function(){_A_.Content=document.createElement("SPAllinsonJS-Content"),_A_.Content.setAttribute("id","_A_Content"),_A_.Content.className="_A_Content",_A_.Container.appendChild(_A_.Content)},verifyIsCssTransitionSupported:function(){_A_.Utils.isCssFeatureSupported("transition")||(_A_.Utils.isCssTransitionSupported=!1,_A_.Settings.splash&&(_A_.Settings.splash.doesFadeOut=!1))},performInitialRouting:function(){var e;if(window.location.hash)e=window.location.hash;else{if(!_A_.Settings.initialRoute)return;e="#/"+_A_.Settings.initialRoute}_A_.Router.doReplaceHistoryItem=!0,_A_.Router.routeToHash(e,function(){_A_.Setup.cleanup()})},cleanup:function(){delete _A_.Preloader,delete _A_.Splash,delete _A_.Setup}},Utils:{isCssTransitionSupported:!0,isCssFeatureSupported:function(e){var t=document.createElement("div");if(void 0!==t.style[e])return!0;for(var n="Webkit Moz ms O".split(" "),r=e.charAt(0).toUpperCase()+e.substr(1),a=0;a<n.length;a++)if(void 0!==t.style[n[a]+r])return!0;return!1},setPageTitle:function(e){var t=_A_.Settings.components[e].pageTitle;t&&(document.title=t)}},Go:function(e,t){return e?""==e?void(t&&t({error:"EmptyRoute"})):void _A_.Router.goHelper(e,t):void(t&&t({error:"NullRoute"}))},Get:function(e){if(!e)return null;if(e.constructor===Array){if(0==e.length)return null;for(var t=[],n=0;n<e.length;n++){var r=_A_.GetHelper(e[n]);r&&t.push(r)}return 0==t.length?null:t}var r=_A_.GetHelper(e);return r?r:null},GetHelper:function(e){if(!e)return null;var t=_A_._R_[e];if(!t)return null;var n=t.componentName;if(!n)return null;var r=t.componentIndex;if(!r)return null;var a=_A_._I_[n][r.toString()];return a?a:null},Component:function(componentName,divId,data,me,callback){if(!componentName)return null;if(!_A_.Settings.components[componentName])return null;if(!divId)return null;var containerDiv=document.getElementById(divId);if(!containerDiv)return null;if(!me)return null;var instance;try{instance=eval(me)}catch(e){return null}var meComponentCount=eval(me)._A_Component_Count,divCount=meComponentCount?meComponentCount:1,htmlString="",arrayOfRoutesToReturn=[],tempId="C_"+divCount+"_."+me;return htmlString+='<component id="'+tempId+'"></component>',data?arrayOfRoutesToReturn.push([[componentName,data],tempId.toString()]):arrayOfRoutesToReturn.push([componentName,tempId.toString()]),divCount+=1,instance._A_Component_Count=divCount,containerDiv.innerHTML=htmlString,_A_.Router.routeTo(arrayOfRoutesToReturn,null,function(){if(callback){var e=_A_.Get(tempId);try{callback(e)}catch(t){}}}),tempId},Repeat:function(componentName,divId,data,me,callback){if(!componentName)return null;if(!_A_.Settings.components[componentName])return null;if(!divId)return null;var containerDiv=document.getElementById(divId);if(!containerDiv)return null;if(!data)return null;if(0==data.length,!me)return null;var instance;try{instance=eval(me)}catch(e){return null}for(var meDivCount=instance["_A_Repeat_Count_"+divId],divCount=meDivCount?meDivCount:1,htmlString="",arrayOfTempIds=[],arrayOfRoutesToReturn=[],i=0;i<data.length;i++){var tempId="R_"+divCount+"_."+divId;arrayOfTempIds.push(tempId),htmlString+='<repeat id="'+tempId+'"></repeat>',arrayOfRoutesToReturn.push([[componentName,data[i]],tempId.toString()]),divCount+=1}return instance["_A_Repeat_Count_"+divId]=divCount,containerDiv.innerHTML=htmlString,_A_.Router.routeTo(arrayOfRoutesToReturn,null,function(){if(callback){var e=_A_.Get(arrayOfTempIds);try{callback(e)}catch(t){}}}),arrayOfTempIds},Append:function(componentName,divId,data,me,callback){if(!componentName)return null;if(!_A_.Settings.components[componentName])return null;if(!divId)return null;var containerDiv=document.getElementById(divId);if(!containerDiv)return null;if(!data)return null;if(0==data.length)return null;if(!me)return null;var instance;try{instance=eval(me)}catch(e){return null}for(var meDivCount=instance["_A_Repeat_Count_"+divId],divCount=meDivCount?meDivCount:1,htmlString="",arrayOfRoutesToReturn=[],arrayOfTempIds=[],i=0;i<data.length;i++){var tempId="R_"+divCount+"_."+divId;arrayOfTempIds.push(tempId),htmlString+='<repeat id="'+tempId+'"></repeat>',arrayOfRoutesToReturn.push([[componentName,data[i]],tempId.toString()]),divCount+=1}instance["_A_Repeat_Count_"+divId]=divCount;var tempDiv=document.createElement("div");for(tempDiv.innerHTML=htmlString;tempDiv.firstChild;)containerDiv.appendChild(tempDiv.firstChild);return _A_.Router.routeTo(arrayOfRoutesToReturn,null,function(){if(callback){var e=_A_.Get(arrayOfTempIds);try{callback(e)}catch(t){}}}),arrayOfTempIds},Rebind:function(me){if(me){var instance;try{instance=eval(me)}catch(e){return}var instanceArray=instance._A_Bind_Array;if(instanceArray&&0!=instanceArray.length)for(var i=0;i<instanceArray.length;i++){var tempDiv=document.getElementById("B_"+i+"_."+me);if(tempDiv){var tempData;try{tempData=eval(me+"."+instanceArray[i])}catch(e){return}tempDiv.innerHTML=tempData}}}},Repaint:function(me,callback){if(me){var tempDivId=_A_.RepaintHelper[me].divId;if(void 0!==tempDivId&&!_A_.RepaintHelper[me].isRepainting){var tempInstance;try{tempInstance=eval(me)}catch(e){return}_A_.RepaintHelper[me].isRepainting=!0;var tempComponentName=_A_._R_[tempDivId].componentName,tempComponentView=_A_.Settings.components[tempComponentName].view,tempData=tempInstance.model,tempDiv=document.getElementById(tempDivId),url=_A_.Settings.appRoot+tempComponentView;_A_.Ajax("GET",url,null,null,function(e){var t=!0;_A_.Router.isRouting&&(t=!1);var n=_A_.Inject.init(e,me,[]);if(e=n[0],0!=n[1].length){_A_.Router.workerArray||(_A_.Router.workerArray=[]);for(var r=0;r<n[1].length;r++)_A_.Router.workerArray.push(n[1][r])}tempDiv.innerHTML="",_A_.MemoryManagement.garbageCollection(),tempDiv.innerHTML=e,tempInstance.viewDidLoad(),_A_.RepaintHelper[me].isRepainting=!1,_A_.Router.routeTo(_A_.Router.workerArray,t,callback)},function(e){},"cache")}}},RepaintHelper:{},Router:{count:0,currentHash:null,currentRoute:null,currentQueryString:null,doReplaceHistoryItem:!0,isHashChangeWarm:!1,isRouting:!1,callbackArray:null,forceLoadArray:null,workerArray:null,goHelper:function(e,t){var n=e.split("?"),r=n[0],a=n[1];if("/"==r.substr(r.length-1,1)&&(r=r.substr(0,r.length-1)),"./"==r.substr(0,2)){var o=window.location.hash.replace("#/",""),i=o.split("?");o=i[0],"/"==o.substr(o.length-1,1)&&(o=o.substr(0,o.length-1)),r=o+r.substr(1)}if("../"==r.substr(0,3)){var o=window.location.hash.replace("#/",""),i=o.split("?");o=i[0],"/"==o.substr(o.length-1,1)&&(o=o.substr(0,o.length-1));var s=o.split("/");o="";for(var l=0;l<s.length;l++)l!=s.length-1&&(o+="/"+s[l]);r=o+r.substr(2)}"/"==r.substr(0,1)&&(r=r.substr(1));for(var i=r.split("/"),l=0;l<i.length;l++){var _=i[l].replace("!",""),c=_A_.Settings.routes[_];if(!c){if(_A_.Settings.fallbackRoute){for(var p=_A_.Settings.fallbackRoute.split("/"),m=0;m<p.length;m++){var u=_A_.Settings.routes[p[m]];if(!u)return}_A_.Go(_A_.Settings.fallbackRoute)}return}}var o;o=a?"#/"+r+"/?"+a:"#/"+r,_A_.Settings.historyEnabled&&(_A_.Router.isHashChangeWarm=!0,window.location.hash=o,window.location.hash!=_A_.Router.currentHash&&(_A_.Router.doReplaceHistoryItem=!0)),_A_.Router.routeToHash(o,t)},routeToHash:function(passedHash,callback){var tempHash=passedHash.replace("#/",""),tempHashArray=tempHash.split("?");"/"==tempHashArray[0].substr(tempHashArray[0].length-1,1)&&(tempHashArray[0]=tempHashArray[0].substr(0,tempHashArray[0].length-1));var arrayOfParts=tempHashArray[0].split("/");if(_A_.Settings.routeRules)for(var i=0;i<arrayOfParts.length;i++)for(var ii=0;ii<_A_.Settings.routeRules.length;ii++)if(_A_.Settings.routeRules[ii].condition&&_A_.Settings.routeRules[ii].fallback&&_A_.Settings.routeRules[ii].routes)for(var iii=0;iii<_A_.Settings.routeRules[ii].routes.length;iii++)if(_A_.Settings.routeRules[ii].routes[iii]==arrayOfParts[i]){var check;try{check=eval(_A_.Settings.routeRules[ii].condition)}catch(e){}if(!check){_A_.Router.doReplaceHistoryItem=!0;var fallbackHash="#/"+_A_.Settings.routeRules[ii].fallback;return _A_.Router.routeToHash(fallbackHash,callback)}}_A_.Router.forceLoadArray=[];for(var arrayOfAllRoutes=Object.keys(_A_.Settings.routes),arrayToRouteTo=[],i=0;i<arrayOfParts.length;i++){if(arrayOfParts[i].indexOf("!")!=-1){arrayOfParts[i]=arrayOfParts[i].replace("!","");var tempArray=_A_.Settings.routes[arrayOfParts[i]];if(!tempArray){if(_A_.Settings.fallbackRoute){for(var tempArray2=_A_.Settings.fallbackRoute.split("/"),j=0;j<tempArray2.length;j++){var tempRoute=_A_.Settings.routes[tempArray2[j]];if(!tempRoute)return}_A_.Go(_A_.Settings.fallbackRoute)}return}for(var ii=0;ii<tempArray.length;ii++)_A_.Router.forceLoadArray.push(!0)}else{var tempArray=_A_.Settings.routes[arrayOfParts[i]];if(!tempArray){if(_A_.Settings.fallbackRoute){for(var tempArray2=_A_.Settings.fallbackRoute.split("/"),j=0;j<tempArray2.length;j++){var tempRoute=_A_.Settings.routes[tempArray2[j]];if(!tempRoute)return}_A_.Go(_A_.Settings.fallbackRoute)}return}for(var ii=0;ii<tempArray.length;ii++)_A_.Router.forceLoadArray.push(!1)}for(var ii=0;ii<arrayOfAllRoutes.length;ii++)if(arrayOfParts[i]==arrayOfAllRoutes[ii]){arrayToRouteTo.push.apply(arrayToRouteTo,_A_.Settings.routes[arrayOfAllRoutes[ii]]);break}}tempHashArray[1]?(_A_.Router.currentHash="#/"+tempHashArray[0]+"/?"+tempHashArray[1],_A_.Router.currentRoute=tempHashArray[0],_A_.Router.currentQueryString=tempHashArray[1]):(_A_.Router.currentHash="#/"+tempHashArray[0],_A_.Router.currentRoute=tempHashArray[0],_A_.Router.currentQueryString=null),_A_.Router.routeTo(arrayToRouteTo,null,callback)},routeTo:function(arrayOfMappingArrays,noIndex,callback){if(callback&&(_A_.Router.callbackArray||(_A_.Router.callbackArray=[]),_A_.Router.callbackArray.push(callback)),!arrayOfMappingArrays){if(_A_.Router.callbackArray){for(var i=0;i<_A_.Router.callbackArray.length;i++)_A_.Router.callbackArray[i]({error:"NullArray"});_A_.Router.callbackArray=null}return _A_.Router.resetVariables(),void(_A_.Router.isHashChangeWarm=!1)}if(0==arrayOfMappingArrays.length){if(_A_.Router.callbackArray){for(var i=0;i<_A_.Router.callbackArray.length;i++)_A_.Router.callbackArray[i]({error:"EmptyArray"});_A_.Router.callbackArray=null}return _A_.Router.resetVariables(),void(_A_.Router.isHashChangeWarm=!1)}if(_A_.Router.isRouting)for(var tempCount=arrayOfMappingArrays.length,i=0;i<tempCount;i++)_A_.Router.workerArray.push(arrayOfMappingArrays[i]);else{if(_A_.Router.isRouting=!0,_A_.Router.workerArray||(_A_.Router.workerArray=[],_A_.Router.workerArray=arrayOfMappingArrays.slice(0)),!_A_.Router.workerArray[_A_.Router.count])return _A_.Router.count==_A_.Router.workerArray.length-1&&(_A_.Router.doReplaceHistoryItem=!0),_A_.Router.end(_A_.Router.workerArray,noIndex);var componentName,componentData;if(_A_.Router.workerArray[_A_.Router.count][0].constructor===Array?(componentName=_A_.Router.workerArray[_A_.Router.count][0][0],componentData=_A_.Router.workerArray[_A_.Router.count][0][1]):(componentName=_A_.Router.workerArray[_A_.Router.count][0],componentData=null),!componentName)return _A_.Router.count==_A_.Router.workerArray.length-1&&(_A_.Router.doReplaceHistoryItem=!0),_A_.Router.end(_A_.Router.workerArray,noIndex);var component=_A_.Settings.components[componentName];if(!component)return _A_.Router.count==_A_.Router.workerArray.length-1&&(_A_.Router.doReplaceHistoryItem=!0),_A_.Router.end(_A_.Router.workerArray,noIndex);var componentView=component.view;if(!componentView)return _A_.Router.count==_A_.Router.workerArray.length-1&&(_A_.Router.doReplaceHistoryItem=!0),_A_.Router.end(_A_.Router.workerArray,noIndex);var divId=_A_.Router.workerArray[_A_.Router.count][1];if(!divId)return _A_.Router.count==_A_.Router.workerArray.length-1&&(_A_.Router.doReplaceHistoryItem=!0),_A_.Router.end(_A_.Router.workerArray,noIndex);"app"!=divId&&""!=divId||(divId="_A_Content");var optionalTransition=_A_.Router.workerArray[_A_.Router.count][2];if(_A_._R_[divId]&&!_A_.Router.forceLoadArray[_A_.Router.count]&&_A_._R_[divId].componentName==componentName)return _A_.Router.count==_A_.Router.workerArray.length-1&&(_A_.Router.doReplaceHistoryItem=!0),_A_.Router.end(_A_.Router.workerArray,noIndex);if("http"==componentView.substring(0,4)){var temp=document.createElement("object");temp.setAttribute("type","text/html"),temp.setAttribute("data",componentView),temp.style.position=document.getElementById(divId).style.position,temp.style["float"]=document.getElementById(divId).style["float"],temp.style.top=document.getElementById(divId).style.top,temp.style.left=document.getElementById(divId).style.left,temp.style.width=document.getElementById(divId).style.width,temp.style.height=document.getElementById(divId).style.height,temp.style.marginTop=document.getElementById(divId).style.marginTop,temp.style.marginRight=document.getElementById(divId).style.marginRight,temp.style.marginBottom=document.getElementById(divId).style.marginBottom,temp.style.marginLeft=document.getElementById(divId).style.marginLeft,temp.style.zIndex=document.getElementById(divId).style.zIndex,"fade"==optionalTransition&&_A_.Utils.isCssTransitionSupported||"fade"!=optionalTransition&&null!=optionalTransition?"fade"==optionalTransition&&(temp.style.visibility="hidden",temp.style.opacity="0",document.getElementById(divId).classList.remove("_A_Hidden"),document.getElementById(divId).classList.remove("_A_Fade_In"),document.getElementById(divId).classList.remove("_A_Fade_Out"),document.getElementById(divId).classList.add("_A_Fade_Out"),setTimeout(function(){document.getElementById(divId).parentNode.insertBefore(temp,document.getElementById(divId).nextSibling),temp.className=document.getElementById(divId).className,document.getElementById(divId).parentNode.removeChild(document.getElementById(divId)),_A_.MemoryManagement.deregisterComponent(divId),_A_.MemoryManagement.registerComponent(divId,componentName,componentData,function(e){temp.setAttribute("id",divId),("fade"==optionalTransition&&_A_.Utils.isCssTransitionSupported||"fade"!=optionalTransition&&null!=optionalTransition)&&"fade"==optionalTransition&&(temp.style.display="",temp.style.visibility="",temp.style.opacity="",temp.classList.remove("_A_Hidden"),temp.classList.remove("_A_Fade_In"),temp.classList.remove("_A_Fade_Out"),temp.classList.add("_A_Hidden"),setTimeout(function(){temp.classList.remove("_A_Hidden"),temp.classList.add("_A_Fade_In")},100)),_A_.Utils.setPageTitle(componentName),_A_.Router.end(_A_.Router.workerArray,noIndex)})},500)):(temp.style.visibility="visible",temp.style.opacity="1",document.getElementById(divId).parentNode.insertBefore(temp,document.getElementById(divId).nextSibling),temp.className=document.getElementById(divId).className,document.getElementById(divId).parentNode.removeChild(document.getElementById(divId)),_A_.MemoryManagement.deregisterComponent(divId),_A_.MemoryManagement.registerComponent(divId,componentName,componentData,function(e){temp.setAttribute("id",divId),_A_.Utils.setPageTitle(componentName),_A_.Router.end(_A_.Router.workerArray,noIndex)}))}else{var url=_A_.Settings.appRoot+componentView;_A_.Ajax("GET",url,null,null,function(response){if("fade"==optionalTransition&&_A_.Utils.isCssTransitionSupported||"fade"!=optionalTransition&&null!=optionalTransition){if("fade"==optionalTransition){var temp;temp="_A_Content"==divId?document.createElement("SPAllinsonJS-Content"):document.createElement("div"),temp.setAttribute("id","_A_Temp_"+_A_.Router.count),temp.style.position=document.getElementById(divId).style.position,temp.style["float"]=document.getElementById(divId).style["float"],temp.style.top=document.getElementById(divId).style.top,temp.style.left=document.getElementById(divId).style.left,temp.style.width=document.getElementById(divId).style.width,temp.style.height=document.getElementById(divId).style.height,temp.style.marginTop=document.getElementById(divId).style.marginTop,temp.style.marginRight=document.getElementById(divId).style.marginRight,temp.style.marginBottom=document.getElementById(divId).style.marginBottom,temp.style.marginLeft=document.getElementById(divId).style.marginLeft,temp.style.zIndex=document.getElementById(divId).style.zIndex,temp.style.visibility="hidden",temp.style.opacity="0",temp.style.display="none",temp.innerHTML=response,document.getElementById(divId).classList.remove("_A_Hidden"),document.getElementById(divId).classList.remove("_A_Fade_In"),document.getElementById(divId).classList.remove("_A_Fade_Out"),document.getElementById(divId).classList.add("_A_Fade_Out"),setTimeout(function(){temp.className=document.getElementById(divId).className,_A_.MemoryManagement.deregisterComponent(divId),_A_.MemoryManagement.loadControllerScript(componentName,function(){_A_.MemoryManagement.registerComponent(divId,componentName,componentData,function(me){if(!temp)return _A_.MemoryManagement.deregisterComponent(divId),void _A_.Router.end(_A_.Router.workerArray,noIndex);temp.style.display="block";var injectArray=_A_.Inject.init(response,me,arrayOfMappingArrays);response=injectArray[0],_A_.Router.workerArray=injectArray[1],temp.innerHTML=response,temp.style.display="",temp.style.visibility="",temp.style.opacity="",temp.classList.remove("_A_Hidden"),temp.classList.remove("_A_Fade_In"),temp.classList.remove("_A_Fade_Out"),temp.classList.add("_A_Hidden"),setTimeout(function(){temp.classList.remove("_A_Hidden"),temp.classList.add("_A_Fade_In")},100),document.getElementById(divId).parentNode.insertBefore(temp,document.getElementById(divId).nextSibling),document.getElementById(divId).parentNode.removeChild(document.getElementById(divId)),temp.setAttribute("id",divId),_A_.Utils.setPageTitle(componentName);var tempInstance=eval(me);tempInstance&&tempInstance.viewDidLoad(),_A_.Router.end(_A_.Router.workerArray,noIndex)})})},500)}}else _A_.MemoryManagement.deregisterComponent(divId),_A_.MemoryManagement.loadControllerScript(componentName,function(){_A_.MemoryManagement.registerComponent(divId,componentName,componentData,function(me){var temp=document.getElementById(divId);if(!temp)return _A_.MemoryManagement.deregisterComponent(divId),void _A_.Router.end(_A_.Router.workerArray,noIndex);var injectArray=_A_.Inject.init(response,me,_A_.Router.workerArray);response=injectArray[0],_A_.Router.workerArray=injectArray[1],temp.innerHTML=response,_A_.Utils.setPageTitle(componentName);var tempInstance=eval(me);tempInstance&&tempInstance.viewDidLoad(),_A_.Router.end(_A_.Router.workerArray,noIndex)})})},function(e){alert(e.response)},"cache")}}},end:function(e,t){if(_A_.Router.count<e.length-1)_A_.Router.count+=1,_A_.Router.isRouting=!1,_A_.Router.routeTo(e,t);else{if(!t){for(var n=!1,r=!1,a=0;a<e.length;a++)"R_"==String(e[a][1]).substring(0,2)?(n=!0,e.splice(a,1),a--):"C_"==String(e[a][1]).substring(0,2)&&(r=!0,e.splice(a,1),a--);if(0==e.length);else if(_A_.Settings.historyEnabled){var o=_A_.Router.currentHash?_A_.Settings.appRoot+_A_.Router.currentHash:_A_.Settings.appRoot;_A_.Router.doReplaceHistoryItem?window.history.replaceState(_A_.Router.currentHash,document.title,o):window.history.pushState(_A_.Router.currentHash,document.title,o)}else window.history.replaceState(_A_.Router.currentHash,document.title,_A_.Settings.appRoot)}_A_.MemoryManagement.garbageCollection(),_A_.Router.resetVariables(),_A_.Router.isHashChangeWarm=!1,setTimeout(function(){if(_A_.Router.callbackArray){for(var e=0;e<_A_.Router.callbackArray.length;e++)_A_.Router.callbackArray[e]({});_A_.Router.callbackArray=null}_A_.Note.fire("_A_ROUTING_COMPLETED")},0)}},resetVariables:function(){_A_.Router.isRouting=!1,_A_.Router.count=0,_A_.Router.workerArray=null,_A_.Router.forceLoadArray=null,_A_.Router.doReplaceHistoryItem=!1;for(var e=Object.keys(_A_.RepaintHelper),t=0;t<e.length;t++)_A_.RepaintHelper[e[t]].isRepainting=!1}},Inject:{init:function(e,t,n){if(null!=_A_.Locale.localizations&&(e=_A_.Locale.apply(e)),t){var r=_A_.Inject.component(e,t);e=r[0];for(var a=0;a<r[1].length;a++)n.splice(n.length+a,0,r[1][a]);var o=_A_.Inject.repeat(e,t);e=o[0];for(var a=0;a<o[1].length;a++)n.splice(n.length+a,0,o[1][a]);e=_A_.Inject.bind(e,t)}return e=_A_.Inject.eval(e,t),t&&(e=e.replace(/_C_/g,t)),[e,n]},component:function(response,me){var arrayOfRoutesToReturn=[],injectionArray=response.match(/\[C:(.*?)\]/g);if(!injectionArray)return[response,arrayOfRoutesToReturn];for(var instance=eval(me),i=0;i<injectionArray.length;i++){var htmlString="",tempValue=injectionArray[i].replace(/ /g,"").replace("[C:","").replace("]",""),tempArray=tempValue.split(","),tempComponentName=tempArray[0],tempComponentData=tempArray[1];if(tempComponentName)if(_A_.Settings.components[tempComponentName]){var meComponentCount=instance._A_Component_Count,componentCount=meComponentCount?meComponentCount:1,tempId="C_"+componentCount+"_."+me;if(tempComponentData){var tempData;try{tempData=eval(me+"."+tempComponentData)}catch(e){response=response.replace(injectionArray[i],htmlString);continue}arrayOfRoutesToReturn.push([[tempComponentName.toString(),tempData],tempId.toString()])}else arrayOfRoutesToReturn.push([tempComponentName.toString(),tempId.toString()]);htmlString+='<component id="'+tempId+'"></component>',componentCount+=1,instance._A_Component_Count=componentCount,response=response.replace(injectionArray[i],htmlString)}else response=response.replace(injectionArray[i],htmlString);else response=response.replace(injectionArray[i],htmlString)}return[response,arrayOfRoutesToReturn]},repeat:function(response,me){var arrayOfRoutesToReturn=[],injectionArray=response.match(/\[R:(.*?)\]/g);if(!injectionArray)return[response,arrayOfRoutesToReturn];for(var instance=eval(me),i=0;i<injectionArray.length;i++){var tempValue=injectionArray[i].replace(/ /g,"").replace("[R:","").replace("]",""),tempArray=tempValue.split(","),tempComponentName=tempArray[0],tempComponentData=tempArray[1];if(tempComponentName)if(tempComponentData)if(_A_.Settings.components[tempComponentName]){var tempDataArray;try{tempDataArray=eval(me+"."+tempComponentData)}catch(e){}if(tempDataArray)if(0!=tempDataArray.length){for(var meDivCount=instance._A_Repeat_Count,divCount=meDivCount?meDivCount:1,htmlString="",ii=0;ii<tempDataArray.length;ii++){var tempId="R_"+divCount+"_."+me;htmlString+='<repeat id="'+tempId+'"></repeat>',arrayOfRoutesToReturn.push([[tempComponentName.toString(),tempDataArray[ii]],tempId.toString()]),divCount+=1}instance._A_Repeat_Count=divCount,response=response.replace(injectionArray[i],htmlString)}else response=response.replace(injectionArray[i],"");else response=response.replace(injectionArray[i],"")}else response=response.replace(injectionArray[i],"");else response=response.replace(injectionArray[i],"");else response=response.replace(injectionArray[i],"")}return[response,arrayOfRoutesToReturn]},bind:function(response,me){var bindingArray=response.match(/\[B:(.*?)\]/g);if(!bindingArray)return response;var instance=eval(me);instance._A_Bind_Array||(instance._A_Bind_Array=[]);for(var divCount=0,workerArray=[],i=0;i<bindingArray.length;i++){var modelProperty=bindingArray[i].replace(/ /g,"").replace("[B:","").replace("]","");if(modelProperty){var tempValue=eval(me+"."+modelProperty);if(void 0!==tempValue){var tempId="B_"+divCount+"_."+me;response=null==tempValue?response.replace(bindingArray[i],'<bind id="'+tempId+'"></bind>'):response.replace(bindingArray[i],'<bind id="'+tempId+'">'+tempValue+"</bind>"),instance._A_Bind_Array.push(modelProperty),divCount+=1}else response=response.replace(bindingArray[i],"")}else response=response.replace(bindingArray[i],"")}return response},eval:function(response,me){var evalArray=response.match(/\[E:(.*?)\]/g);if(!evalArray)return response;for(var i=0;i<evalArray.length;i++){var toBeEvaluated=evalArray[i].replace("[E:","").replace("]","");if(toBeEvaluated){var usingController=toBeEvaluated.match(/\_C_/g);if(!usingController||me){usingController&&(toBeEvaluated=toBeEvaluated.replace(/_C_/g,me));var tempData;try{tempData=eval(toBeEvaluated)}catch(e){response=response.replace(evalArray[i],"");continue}response=void 0!==tempData?response.replace(evalArray[i],tempData):response.replace(evalArray[i],"")}else response=response.replace(evalArray[i],"")}else response=response.replace(evalArray[i],"")}return response}},MemoryManagement:{loadScript:function(e,t){if(e){for(var n=document.getElementsByTagName("head")[0].getElementsByTagName("script"),r=0;r<n.length;r++){var a=n[r];if(a.getAttribute("src")==e){if(t)try{return t()}catch(o){return}return}}var i=document.createElement("script");i.type="text/javascript",i.readyState?i.onreadystatechange=function(){if("loaded"==i.readyState||"complete"==i.readyState)if(i.onreadystatechange=null,this.status>=200&&this.status<400){if(t)try{t()}catch(e){}}else if(t)try{t()}catch(n){}}:(i.onload=function(){if(t)try{t()}catch(e){}},i.onerror=function(e){if(t)try{t(e)}catch(n){}}),i.src=e,document.getElementsByTagName("head")[0].appendChild(i)}else if(t)try{return t()}catch(o){}},unloadScript:function(e){if(e)for(var t=document.getElementsByTagName("head")[0].getElementsByTagName("script"),n=0;n<t.length;n++){var r=t[n];if(r.getAttribute("src")==e){document.getElementsByTagName("head")[0].removeChild(r);break}}},loadControllerScript:function(e,t){if(!_A_.Settings.components[e])return t();var n=_A_.Settings.components[e].controller;return n?void _A_.MemoryManagement.loadScript(n,t):t()},unloadControllerScript:function(e){if(_A_.Settings.components[e]){var t=_A_.Settings.components[e].controller;t&&_A_.MemoryManagement.unloadScript(t)}},registerComponent:function(divId,componentName,componentData,callback){_A_._R_[divId]||(_A_._R_[divId]={});var controllerDefinition=_A_.Settings.components[componentName].controller,controllerImport=_A_.Controllers[componentName];if(controllerDefinition||controllerImport){_A_._I_[componentName]||(_A_._I_[componentName]={});var componentIndex=1,instancesDict=_A_._I_[componentName],noKeys=Object.keys(instancesDict).length,lastInstance=instancesDict[Object.keys(instancesDict)[noKeys-1]];if(lastInstance){var tempArray=lastInstance.me.split("'");componentIndex=parseInt(tempArray[3])+1}var tempMe="_A_._I_['"+componentName+"']['"+componentIndex+"']";componentData||(componentData={}),_A_._R_[divId].componentName=componentName,_A_._R_[divId].componentIndex=componentIndex,_A_.RepaintHelper[tempMe]={},_A_.RepaintHelper[tempMe].divId=divId;var tempServiceInstanceArray,tempServicesArray=_A_.Settings.components[componentName].services;if(tempServicesArray){tempServiceInstanceArray=[];for(var i=0;i<tempServicesArray.length;i++){var tempInstance;try{tempInstance=eval("new _A_.Services."+tempServicesArray[i]+"();"),tempServiceInstanceArray.push(tempInstance)}catch(e){}}}var tempString="new _A_.Controllers['"+componentName+"'](";if(tempServiceInstanceArray)for(var i=0;i<tempServiceInstanceArray.length;i++)tempString+="tempServiceInstanceArray["+i+"]",i!=tempServiceInstanceArray.length-1&&(tempString+=",");tempString+=");";var instance=eval(tempString);_A_._I_[componentName][componentIndex.toString()]=instance,instance.init(tempMe,componentData),callback(tempMe)}else _A_._R_[divId].componentName=componentName,callback(null)},deregisterComponent:function(divId){if(_A_._R_[divId]){var componentName=_A_._R_[divId].componentName,controllerDefinition=_A_.Settings.components[componentName].controller,controllerImport=_A_.Controllers[componentName];if(!controllerDefinition&&!controllerImport)return void delete _A_._R_[divId];var componentIndex=_A_._R_[divId].componentIndex;delete _A_._R_[divId];var tempMe="_A_._I_["+componentName+"]["+componentIndex+"]";delete _A_.RepaintHelper[tempMe];var instance=eval(_A_._I_[componentName][componentIndex]);instance.dealloc(function(){if(delete _A_._I_[componentName][componentIndex],0==Object.keys(_A_._I_[componentName])&&delete _A_._I_[componentName],_A_.Settings.scriptManagementEnabled){var e=_A_.Settings.components[componentName].controller,t=!0;for(var n in _A_._R_){if(componentName==_A_._R_[n].componentName){t=!1;break}var r=_A_.Settings.components[_A_._R_[n].componentName].controller;if(e&&r&&e==r){t=!1;break}}t&&_A_.MemoryManagement.unloadControllerScript(componentName)}})}},garbageCollection:function(){for(var e in _A_._R_){var t=document.getElementById(e);t||_A_.MemoryManagement.deregisterComponent(e)}}},WindowEvents:{handleResize:function(){_A_.Content.style.width="100%",_A_.Content.style.height="100%"},handleHashChange:function(){_A_.Router.isHashChangeWarm||_A_.Settings.historyEnabled&&(_A_.Router.doReplaceHistoryItem=!0,_A_.Router.routeToHash(window.location.hash)),_A_.Router.isHashChangeWarm=!1},handlePopState:function(e){if(e.state&&_A_.Settings.historyEnabled){var t=e.state.replace("#/","");_A_.Go(t,function(){setTimeout(function(){_A_.Note.fire("_A_HISTORY_TRAVERSED",e.state)},0)})}}},Ajax:function(e,t,n,r,a,o,i){if(e&&t){var s=0;if(i)if(_A_.AjaxCache[t]){for(var l=!1,_=0;_<_A_.AjaxCache[t].length;_++){var c=_A_.AjaxCache[t][_],p=c[0],m=c[1],u=c[2];if(e==p&&JSON.stringify(n)==JSON.stringify(m)&&JSON.stringify(r)==JSON.stringify(u)){if("cache"==i){try{a(c[3])}catch(d){}return null}if("update-cache"==i){s=_,l=!0;break}if("clear-cache"==i){_A_.AjaxCache[t].splice(_,1),l=!0;break}}}l||"cache"!=i&&"update-cache"!=i||(s=_A_.AjaxCache[t].length,_A_.AjaxCache[t].push([]))}else"cache"!=i&&"update-cache"!=i||(_A_.AjaxCache[t]=[[]]);!i||"update-cache"!=i&&"clear-cache"!=i||(t+="?"+(new Date).getTime());var A=new XMLHttpRequest;if(A.open(e,t),A.onreadystatechange=function(){if(4==A.readyState&&A.status>0&&A.status<400){var l;l=void 0===A.response?A.responseText:A.response,"cache"!=i&&"update-cache"!=i||(_A_.AjaxCache[t][s]=[e,n,r,l]);try{a(l)}catch(_){}}else if(4==A.readyState&&A.status>=400){var l;l=void 0===A.response?A.responseText:A.response;try{o({status:A.status,statusText:A.statusText,response:l})}catch(_){}}else if(4==A.readyState&&0==A.status)try{o({status:500,statusText:"",response:""})}catch(_){}},null!=n)for(var _=0;_<n.length;_++)A.setRequestHeader(n[_].key,n[_].value);return A.send(r),A}},AjaxCache:{},Splash:{view:null,dateTimeForShowForAtLeast:null,create:function(e){_A_.Splash.view=document.createElement("SPAllinsonJS-Splash"),_A_.Splash.view.className="_A_Splash",_A_.Container.appendChild(_A_.Splash.view),e()},load:function(e){var t=_A_.Settings.appRoot+_A_.Settings.splash.view;_A_.Ajax("GET",t,null,null,function(t){for(var n=Object.keys(_A_.Settings.splash.imageSuffixForDevicePixelRatio),r=0;r<n.length;r++)if(n[r]==window.devicePixelRatio){var a=_A_.Settings.splash.imageSuffixForDevicePixelRatio[n[r]];t=t.replace(/.png/g,a+".png"),t=t.replace(/.jpg/g,a+".jpg"),t=t.replace(/.jpeg/g,a+".jpeg"),t=t.replace(/.gif/g,a+".gif"),t=t.replace(/.bmp/g,a+".bmp")}t.indexOf("_A_.Splash.loaded()")!=-1&&(t=t.replace("_A_.Splash.loaded()","_A_.Splash.loaded("+e+")"),_A_.Splash.dateTimeForShowForAtLeast=new Date,_A_.Splash.view.innerHTML=t)},function(e){alert(e.response)},null)},loaded:function(e){e()},applyShowForAtLeast:function(e){var t=new Date,n=t.getTime()-_A_.Splash.dateTimeForShowForAtLeast.getTime(),r=_A_.Settings.splash.showForAtLeastMills-n;r<0&&(r=0),setTimeout(function(){e()},r)},dismiss:function(e){_A_.Settings.splash.doesFadeOut?(_A_.Splash.view.classList.add("_A_Fade_Out"),setTimeout(function(){_A_.Splash.remove(e)},500)):_A_.Splash.remove(e)},remove:function(e){_A_.Container.removeChild(_A_.Splash.view),
e()}},Preloader:{arrayOfComponentsToPreload:[],preloadedServiceSingletonCount:0,preloadedComponentCount:0,preloadServicesAndSingletons:function(callback){for(var tempArrayOfUrls=[],servicesKeys=Object.keys(_A_.Settings.services),i=0;i<servicesKeys.length;i++)tempArrayOfUrls.push(_A_.Settings.services[servicesKeys[i]]);for(var singletonsKeys=Object.keys(_A_.Settings.singletons),i=0;i<singletonsKeys.length;i++)tempArrayOfUrls.push(_A_.Settings.singletons[singletonsKeys[i]]);if(0==tempArrayOfUrls.length)return callback();for(var i=0;i<tempArrayOfUrls.length;i++)_A_.MemoryManagement.loadScript(tempArrayOfUrls[i],function(){if(_A_.Preloader.preloadedServiceSingletonCount+=1,_A_.Preloader.preloadedServiceSingletonCount==tempArrayOfUrls.length){if(singletonsKeys)for(var ii=0;ii<singletonsKeys.length;ii++)eval("window."+singletonsKeys[ii]+" = new _A_.Singletons['"+singletonsKeys[ii]+"']()");callback()}})},preloadComponents:function(e){for(var t=[],n=Object.keys(_A_.Settings.components),r=0;r<n.length;r++)_A_.Settings.components[n[r]].preload&&t.push(n[r]);if(0==t.length)return e();for(var r=0;r<t.length;r++)_A_.Preloader.preloadComponentWorker(t[r],r,t.length,e)},preloadComponentWorker:function(e,t,n,r){_A_.Preloader.arrayOfComponentsToPreload[t]=document.createElement("SPAllinsonJS-Preloader"),_A_.Preloader.arrayOfComponentsToPreload[t].className="_A_Preloader",_A_.Splash.view.appendChild(_A_.Preloader.arrayOfComponentsToPreload[t]);var a=_A_.Settings.appRoot+_A_.Settings.components[e].view;_A_.Ajax("GET",a,null,null,function(a){_A_.Preloader.arrayOfComponentsToPreload[t].innerHTML=a,_A_.MemoryManagement.loadControllerScript(e,function(){_A_.Preloader.preloadedComponentCount+=1,_A_.Preloader.preloadedComponentCount==n&&r()})},function(e){_A_.Preloader.preloadedComponentCount+=1,_A_.Preloader.preloadedComponentCount==n&&r()},"cache")}},Note:{notes:{},register:function(e,t,n){e&&t&&n&&(_A_.Note.notes[e]||(_A_.Note.notes[e]={}),_A_.Note.notes[e][t]=n)},deregister:function(e,t){e&&t&&_A_.Note.notes[e]&&(_A_.Note.notes[e][t]&&delete _A_.Note.notes[e][t],0==Object.keys(_A_.Note.notes[e])&&delete _A_.Note.notes[e])},deregisterFromAll:function(e){if(e)for(var t=Object.keys(_A_.Note.notes),n=0;n<t.length;n++)_A_.Note.notes[t[n]][e]&&(delete _A_.Note.notes[t[n]][e],0==Object.keys(_A_.Note.notes[t[n]])&&delete _A_.Note.notes[t[n]])},fire:function(notification,passedData){if(notification&&_A_.Note.notes[notification])for(var keysArray=Object.keys(_A_.Note.notes[notification]),i=0;i<keysArray.length;i++){var instance;try{instance=eval(keysArray[i])}catch(e){continue}var callbackHandler;if(passedData){if(callbackHandler=instance[_A_.Note.notes[notification][keysArray[i]]],!callbackHandler)continue;try{callbackHandler(passedData)}catch(e){continue}}else{if(callbackHandler=instance[_A_.Note.notes[notification][keysArray[i]]],!callbackHandler)continue;try{callbackHandler()}catch(e){continue}}}}},Locale:{defaultLanguage:null,localizations:null,get:function(e){if(!e)return null;if(!_A_.Locale.localizations)return null;var t,n=_A_.Locale.getLang();if(t=_A_.Locale.localizations[n]){var r=t[e];if(r)return r}var a=n.split("-");if(t=_A_.Locale.localizations[a[0]]){var r=t[e];if(r)return r}if(_A_.Locale.defaultLanguage&&(t=_A_.Locale.localizations[_A_.Locale.defaultLanguage])){var r=t[e];if(r)return r}return null},getLang:function(){return void 0===navigator.languages?navigator.language:navigator.languages[0]},apply:function(e){var t=e.match(/\[L:(.*?)\]/g);if(!t)return e;for(var n=0;n<t.length;n++){var r=t[n].replace(/ /g,"").replace("[L:","").replace("]","");if(r){var a=_A_.Locale.get(r);e=a?e.replace(t[n],a):e.replace(t[n],"")}else e=e.replace(t[n],"")}return e}}};window.addEventListener("load",_A_.Setup.init,!1),window.addEventListener("resize",_A_.WindowEvents.handleResize,!1),window.addEventListener("hashchange",_A_.WindowEvents.handleHashChange,!1),window.addEventListener("popstate",function(e){_A_.WindowEvents.handlePopState(e)},!1);