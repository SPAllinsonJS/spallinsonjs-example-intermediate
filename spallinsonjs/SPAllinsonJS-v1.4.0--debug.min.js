var _A_={Container:null,Content:null,DebugConsole:null,Controllers:{},Services:{},Singletons:{},_R_:{},_I_:{},Setup:{init:function(){_A_.Setup.createAppContainer(),_A_.Setup.createAppContentContainer(),_A_.Setup.verifyCssTransitionSupport(),_A_.Debug.Console.init(),_A_.Debug.validateAppVariables()&&(_A_.Setup.setDefaultSettingsValues(),_A_.Splash.init(function(){_A_.Setup.performInitialRouting()}))},createAppContainer:function(){_A_.Container=document.createElement("SPAllinsonJS-App"),document.body.appendChild(_A_.Container)},createAppContentContainer:function(){_A_.Content=document.createElement("SPAllinsonJS-Content"),_A_.Content.setAttribute("id","_A_Content"),_A_.Content.className="_A_Content",_A_.Container.appendChild(_A_.Content)},verifyCssTransitionSupport:function(){_A_.Utils.isCssFeatureSupported("transition")||(_A_.Router.cssTransitionSupport=!1,_A_.Settings.splash&&(_A_.Settings.splash.doesFadeOut=!1))},setDefaultSettingsValues:function(){void 0===_A_.Settings.appRoot&&(_A_.Settings.appRoot="./"),void 0===_A_.Settings.splash&&(_A_.Settings.splash={enabled:!1}),void 0===_A_.Settings.historyEnabled&&(_A_.Settings.historyEnabled=!0),void 0===_A_.Settings.scriptManagementEnabled&&(_A_.Settings.scriptManagementEnabled=!1),void 0===_A_.Settings.routeRules&&(_A_.Settings.routeRules=[]),void 0===_A_.Settings.services&&(_A_.Settings.services={}),void 0===_A_.Settings.singletons&&(_A_.Settings.singletons={})},performInitialRouting:function(){var e;if(window.location.hash)e=window.location.hash;else{if(!_A_.Settings.initialRoute)return;e="#/"+_A_.Settings.initialRoute}_A_.Router.doReplaceHistoryItem=!0,_A_.Router.routeToHash(e,function(){_A_.Setup.cleanup()})},cleanup:function(){delete _A_.Preloader,delete _A_.Splash,delete _A_.Setup}}};_A_.Debug={Console:{Container:null,Panel:null,LogsTab:null,LogsPane:null,WarningsTab:null,WarningsPane:null,ErrorsTab:null,ErrorsPane:null,buttonRadius:50,buttonMoved:!1,init:function(){_A_.Debug.Console.Container=document.createElement("SPAllinsonJS-Debug-Console"),_A_.Debug.Console.Container.setAttribute("id","_A_.DebugConsole"),_A_.Debug.Console.Container.className="_A_DebugConsole",_A_.Debug.Console.Container.innerHTML='<div id="_A_.DebugConsolePanel" class="panel up left"><span class="console-title">SPAllinsonJS Debug Console</span><div class="tabs-container"><a id="_A_.DebugConsoleLogsTab" class="logs active" onclick="_A_.Debug.Console.tabPressed(\'logs\')">Logs</a><a id="_A_.DebugConsoleWarningsTab" class="warnings" onclick="_A_.Debug.Console.tabPressed(\'warnings\')">Warnings</a><a id="_A_.DebugConsoleErrorsTab" class="errors" onclick="_A_.Debug.Console.tabPressed(\'errors\')">Errors</a></div><div id="_A_.DebugConsoleLogsPane" class="content-pane"></div><div id="_A_.DebugConsoleWarningsPane" class="content-pane _A_Display_None"></div><div id="_A_.DebugConsoleErrorsPane" class="content-pane _A_Display_None"></div><div class="action-bar"><a onclick="_A_.Debug.Console.clearPressed()">Clear</a></div></div><div id="_A_.DebugConsoleButton" class="button" onclick="_A_.Debug.Console.buttonPressed()" onmousedown="_A_.Debug.Console.buttonDown()" onmouseup="_A_.Debug.Console.buttonUp()">DEBUG</div>',_A_.Container.appendChild(_A_.Debug.Console.Container),_A_.Debug.Console.setOutlets()},buttonPressed:function(){return _A_.Debug.Console.buttonMoved?void(_A_.Debug.Console.buttonMoved=!1):void(_A_.Debug.Console.Panel.classList.contains("_A_Display_None")?_A_.Debug.Console.Panel.classList.remove("_A_Display_None"):_A_.Debug.Console.Panel.classList.add("_A_Display_None"))},buttonDown:function(){window.addEventListener("mousemove",_A_.Debug.Console.mouseMoved,!1)},buttonUp:function(){window.removeEventListener("mousemove",_A_.Debug.Console.mouseMoved,!1)},mouseMoved:function(e){e.preventDefault(),_A_.Debug.Console.buttonMoved=!0,_A_.Debug.Console.Container.style.top=e.clientY-_A_.Debug.Console.buttonRadius/2+"px",_A_.Debug.Console.Container.style.left=e.clientX-_A_.Debug.Console.buttonRadius/2+"px",_A_.Debug.Console.Panel.classList.contains("up")?_A_.Debug.Console.Panel.classList.remove("up"):"",_A_.Debug.Console.Panel.classList.contains("down")?_A_.Debug.Console.Panel.classList.remove("down"):"",_A_.Debug.Console.Panel.classList.contains("left")?_A_.Debug.Console.Panel.classList.remove("left"):"",_A_.Debug.Console.Panel.classList.contains("right")?_A_.Debug.Console.Panel.classList.remove("right"):"",e.clientY<window.innerHeight/2?_A_.Debug.Console.Panel.classList.add("down"):_A_.Debug.Console.Panel.classList.add("up"),e.clientX<window.innerWidth/2?_A_.Debug.Console.Panel.classList.add("right"):_A_.Debug.Console.Panel.classList.add("left")},tabPressed:function(e){switch(_A_.Debug.Console.LogsTab.classList.contains("active")?_A_.Debug.Console.LogsTab.classList.remove("active"):"",_A_.Debug.Console.LogsPane.classList.contains("_A_Display_None")?"":_A_.Debug.Console.LogsPane.classList.add("_A_Display_None"),_A_.Debug.Console.WarningsTab.classList.contains("active")?_A_.Debug.Console.WarningsTab.classList.remove("active"):"",_A_.Debug.Console.WarningsPane.classList.contains("_A_Display_None")?"":_A_.Debug.Console.WarningsPane.classList.add("_A_Display_None"),_A_.Debug.Console.ErrorsTab.classList.contains("active")?_A_.Debug.Console.ErrorsTab.classList.remove("active"):"",_A_.Debug.Console.ErrorsPane.classList.contains("_A_Display_None")?"":_A_.Debug.Console.ErrorsPane.classList.add("_A_Display_None"),e){case"logs":_A_.Debug.Console.LogsTab.classList.add("active"),_A_.Debug.Console.LogsPane.classList.remove("_A_Display_None");break;case"warnings":_A_.Debug.Console.WarningsTab.classList.add("active"),_A_.Debug.Console.WarningsPane.classList.remove("_A_Display_None");break;case"errors":_A_.Debug.Console.ErrorsTab.classList.add("active"),_A_.Debug.Console.ErrorsPane.classList.remove("_A_Display_None")}},clearPressed:function(){_A_.Debug.Console.LogsTab.classList.contains("active")?_A_.Debug.Console.LogsPane.innerHTML="":"",_A_.Debug.Console.WarningsTab.classList.contains("active")?_A_.Debug.Console.WarningsPane.innerHTML="":"",_A_.Debug.Console.ErrorsTab.classList.contains("active")?_A_.Debug.Console.ErrorsPane.innerHTML="":""},setOutlets:function(){_A_.Debug.Console.Panel=document.getElementById("_A_.DebugConsolePanel"),_A_.Debug.Console.LogsTab=document.getElementById("_A_.DebugConsoleLogsTab"),_A_.Debug.Console.LogsPane=document.getElementById("_A_.DebugConsoleLogsPane"),_A_.Debug.Console.WarningsTab=document.getElementById("_A_.DebugConsoleWarningsTab"),_A_.Debug.Console.WarningsPane=document.getElementById("_A_.DebugConsoleWarningsPane"),_A_.Debug.Console.ErrorsTab=document.getElementById("_A_.DebugConsoleErrorsTab"),_A_.Debug.Console.ErrorsPane=document.getElementById("_A_.DebugConsoleErrorsPane")},record:function(e,n){for(var t='<div class="record">',o=0;o<n.length;o++){var r;switch(o){case 0:r="title";break;case 1:r="description first";break;default:r="description"}t+='<span class="'+r+'">'+n[o]+"</span>"}t+="</div>",e.innerHTML+=t},log:function(e){_A_.Debug.Console.record(_A_.Debug.Console.LogsPane,e)},warning:function(e){_A_.Debug.Console.record(_A_.Debug.Console.WarningsPane,e)},error:function(e){_A_.Debug.Console.record(_A_.Debug.Console.ErrorsPane,e)}},validateAppVariables:function(){var e=!0;if(void 0===_A_.Settings&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings does not exist"]),e=!1),void 0===_A_.Settings.appRoot&&_A_.Debug.Console.warning(["_A_.Settings","_A_.Settings.appRoot does not exist"]),void 0===_A_.Settings.initialRoute&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.initialRoute does not exist"]),e=!1),void 0===_A_.Settings.splash&&_A_.Debug.Console.warning(["_A_.Settings","_A_.Settings.splash does not exist"]),void 0!==_A_.Settings.splash&&(void 0===_A_.Settings.splash.enabled&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.splash.enabled does not exist"]),e=!1),void 0===_A_.Settings.splash.view&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.splash.view does not exist"]),e=!1),void 0===_A_.Settings.splash.doesFadeOut&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.splash.doesFadeOut does not exist"]),e=!1),void 0===_A_.Settings.splash.showForAtLeastMills&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.splash.showForAtLeastMills does not exist"]),e=!1),void 0===_A_.Settings.splash.imageSuffixForDevicePixelRatio&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.splash.imageSuffixForDevicePixelRatio does not exist"]),e=!1)),void 0===_A_.Settings.historyEnabled&&_A_.Debug.Console.warning(["_A_.Settings","_A_.Settings.historyEnabled does not exist"]),void 0===_A_.Settings.scriptManagementEnabled&&_A_.Debug.Console.warning(["_A_.Settings","_A_.Settings.scriptManagementEnabled does not exist"]),void 0===_A_.Settings.components&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.components does not exist"]),e=!1),void 0===_A_.Settings.fallbackRoute&&_A_.Debug.Console.warning(["_A_.Settings","_A_.Settings.fallbackRoute does not exist"]),void 0===_A_.Settings.routes&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.routes does not exist"]),e=!1),void 0===_A_.Settings.routeRules)_A_.Debug.Console.warning(["_A_.Settings","_A_.Settings.routeRules does not exist"]);else if(_A_.Settings.routeRules instanceof Array)for(var n=0;n<_A_.Settings.routeRules.length;n++)_A_.Settings.routeRules[n].condition||(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.routeRules["+n+"].condition does not exist"]),e=!1),"function"!=typeof _A_.Settings.routeRules[n].condition&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.routeRules["+n+"].condition is not a function"]),e=!1),_A_.Settings.routeRules[n].fallback||(e=!1,_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.routeRules["+n+"].fallback does not exist"])),_A_.Settings.routeRules[n].routes||(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.routeRules["+n+"].routes does not exist"]),e=!1),_A_.Settings.routeRules[n].routes instanceof Array||(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.routeRules["+n+"].routes is not a function"]),e=!1);else _A_.Debug.Console.error(["_A_.Settings","_A_.Settings.routeRules is not an array"]),e=!1;return void 0===_A_.Settings.services&&_A_.Debug.Console.warning(["_A_.Settings","_A_.Settings.services does not exist"]),void 0===_A_.Settings.singletons&&_A_.Debug.Console.warning(["_A_.Settings","_A_.Settings.singletons does not exist"]),e}},_A_.Splash={callback:null,view:null,startPreloadTimestamp:null,init:function(e){_A_.Splash.callback=e,_A_.Settings.splash&&_A_.Settings.splash.enabled?_A_.Splash.create(function(){_A_.Splash.load(function(){_A_.Preloader.ServicesSingletons.preload(function(){_A_.Preloader.Components.preload(function(){_A_.Splash.applyShowForAtLeast(function(){_A_.Splash.dismiss(function(){_A_.Splash.callback()})})})})})}):_A_.Preloader.ServicesSingletons.preload(function(){_A_.Splash.callback()})},create:function(e){_A_.Splash.view=document.createElement("SPAllinsonJS-Splash"),_A_.Splash.view.className="_A_Splash",_A_.Container.appendChild(_A_.Splash.view),e()},load:function(e){_A_.Ajax.get(_A_.Settings.appRoot+_A_.Settings.splash.view,null,null,function(n){if(_A_.Settings.splash.imageSuffixForDevicePixelRatio){var t=String(window.devicePixelRatio),o=_A_.Settings.splash.imageSuffixForDevicePixelRatio[t];null!=o&&(n=n.replace(/.png/g,o+".png"),n=n.replace(/.jpg/g,o+".jpg"),n=n.replace(/.jpeg/g,o+".jpeg"),n=n.replace(/.gif/g,o+".gif"),n=n.replace(/.bmp/g,o+".bmp"))}return n.indexOf("_A_.Splash.loaded()")==-1?(_A_.Debug.Console.error(["_A_.Splash.load()","_A_.Splash.loaded() not found in Splash view"]),_A_.Splash.view.innerHTML=n,_A_.Splash.startPreloadTimestamp=new Date,void e()):(n=n.replace("_A_.Splash.loaded()","_A_.Splash.loaded("+e+")"),void(_A_.Splash.view.innerHTML=n))},function(n){_A_.Debug.Console.error(["_A_.Splash.load()",n.response]),_A_.Splash.startPreloadTimestamp=new Date,e()},null)},loaded:function(e){_A_.Splash.startPreloadTimestamp=new Date,e()},applyShowForAtLeast:function(e){if(!_A_.Settings.splash.showForAtLeastMills)return void e();var n=(new Date).getTime()-_A_.Splash.startPreloadTimestamp.getTime(),t=_A_.Settings.splash.showForAtLeastMills-n;t<0&&(t=0),setTimeout(function(){e()},t)},dismiss:function(e){_A_.Settings.splash.doesFadeOut?(_A_.Splash.view.classList.add("_A_Fade_Out"),setTimeout(function(){_A_.Splash.remove(e)},500)):_A_.Splash.remove(e)},remove:function(e){_A_.Container.removeChild(_A_.Splash.view),e()}},_A_.Preloader={ServicesSingletons:{preloadedCount:0,preload:function(e){for(var n=[],t=Object.keys(_A_.Settings.services),o=Object.keys(_A_.Settings.singletons),r=0;r<t.length;r++)n.push(_A_.Settings.services[t[r]]);for(var r=0;r<o.length;r++)n.push(_A_.Settings.singletons[o[r]]);if(0==n.length)return void e();_A_.Debug.Console.log(["Preloading Singletons & Services"]);for(var r=0;r<n.length;r++)_A_.Preloader.ServicesSingletons.worker(n[r],n.length,o,e)},worker:function(e,n,t,o){_A_.MemoryManagement.Script.load(e,function(){_A_.Preloader.ServicesSingletons.preloadedCount+=1,_A_.Preloader.ServicesSingletons.preloadedCount==n&&(_A_.Preloader.ServicesSingletons.createSingletonInstances(t),o())},function(){_A_.Preloader.ServicesSingletons.preloadedCount+=1,_A_.Preloader.ServicesSingletons.preloadedCount==n&&(_A_.Preloader.ServicesSingletons.createSingletonInstances(t),o())})},createSingletonInstances:function(e){if(e)for(var n=0;n<e.length;n++)window[e[n]]=new _A_.Singletons[e[n]]}},Components:{componentsToPreload:[],preloadedCount:0,preload:function(e){for(var n=[],t=Object.keys(_A_.Settings.components),o=0;o<t.length;o++)_A_.Settings.components[t[o]].preload&&n.push(t[o]);if(0==n.length)return void e();_A_.Debug.Console.log(["Preloading Components"]);for(var o=0;o<n.length;o++)_A_.Preloader.Components.worker(n[o],o,n.length,e)},worker:function(e,n,t,o){_A_.Debug.Console.log(["Preloading",e]),_A_.Preloader.Components.componentsToPreload[n]=document.createElement("SPAllinsonJS-Preloader"),_A_.Preloader.Components.componentsToPreload[n].className="_A_Preloader",_A_.Splash.view.appendChild(_A_.Preloader.Components.componentsToPreload[n]);var r=_A_.Settings.components[e].view;"function"==typeof r&&(r=r()),_A_.Ajax.get(_A_.Settings.appRoot+r,null,null,function(r){_A_.Preloader.Components.componentsToPreload[n].innerHTML=r,_A_.Settings.components[e].controller?_A_.MemoryManagement.Script.loadController(e,function(){_A_.Debug.Console.log(["Preloaded",e]),_A_.Preloader.Components.preloadedCount+=1,_A_.Preloader.Components.preloadedCount==t&&o()},function(){_A_.Debug.Console.log(["Preload","error loading controller script",e]),_A_.Preloader.Components.preloadedCount+=1,_A_.Preloader.Components.preloadedCount==t&&o()}):(_A_.Preloader.Components.preloadedCount+=1,_A_.Preloader.Components.preloadedCount==t&&o())},function(n){_A_.Debug.Console.error(["Preloading",e]),_A_.Preloader.Components.preloadedCount+=1,_A_.Preloader.Components.preloadedCount==t&&o()},"cache")}}},_A_.Window={handleResize:function(){_A_.Content.style.width="100%",_A_.Content.style.height="100%"},handleHashChange:function(){_A_.Router.isHashChangeWarm||_A_.Settings.historyEnabled&&(_A_.Router.doReplaceHistoryItem=!0,_A_.Router.routeToHash(window.location.hash)),_A_.Router.isHashChangeWarm=!1},handlePopState:function(e){if(e.state&&_A_.Settings.historyEnabled){var n=e.state.replace("#/","");_A_.Go(n,function(){setTimeout(function(){_A_.Note.fire("_A_HISTORY_TRAVERSED",e.state)},0)})}}},window.addEventListener("load",_A_.Setup.init,!1),window.addEventListener("resize",_A_.Window.handleResize,!1),window.addEventListener("hashchange",_A_.Window.handleHashChange,!1),window.addEventListener("popstate",function(e){_A_.Window.handlePopState(e)},!1),_A_.Router={count:0,cssTransitionSupport:!0,currentHash:null,currentRoute:null,currentQueryString:null,doReplaceHistoryItem:!0,isHashChangeWarm:!1,isRouting:!1,callbackArray:null,workerArray:null,forceReload:null,goHelper:function(e,n){var t=e.split("?"),o=t[0],r=t[1];if(o=_A_.Utils.stripTrailingSlash(o),"./"==o.substr(0,2)){var _=window.location.hash.replace("#/","").split("?")[0];_=_A_.Utils.stripTrailingSlash(_),o=_+o.substr(1)}if("../"==o.substr(0,3)){var _=window.location.hash.replace("#/","").split("?")[0];_=_A_.Utils.stripTrailingSlash(_);var a=_.split("/");_="";for(var s=0;s<a.length-1;s++)_+="/"+a[s];o=_+o.substr(2)}o=_A_.Utils.stripLeadingSlash(o);for(var a=o.split("/"),s=0;s<a.length;s++)if(a[s]=a[s].replace("!",""),!_A_.Settings.routes[a[s]]){if(_A_.Debug.Console.error(["_A_.Go()","route not found","route: "+a[s]]),_A_.Settings.fallbackRoute){for(var i=_A_.Settings.fallbackRoute.split("/"),l=0;l<i.length;l++){var u=_A_.Settings.routes[i[l]];if(!u)return void _A_.Debug.Console.error(["_A_.Go()","error with fallbackRoute"])}_A_.Go(_A_.Settings.fallbackRoute)}return}if(_A_.Settings.routeRules.length>0)for(var s=0;s<a.length;s++)for(var A=0;A<_A_.Settings.routeRules.length;A++)for(var c=0;c<_A_.Settings.routeRules[A].routes.length;c++)if(_A_.Settings.routeRules[A].routes[c]==a[s]){var g;try{g=_A_.Settings.routeRules[A].condition()}catch(p){_A_.Debug.Console.error(["RouteRules","error in condition","RouteRule number: "+A]);continue}if(!g){_A_.Router.doReplaceHistoryItem=!0;var d="#/"+_A_.Settings.routeRules[A].fallback;return _A_.Debug.Console.log(["RouteRules","fallback","RouteRule number: "+A]),_A_.Router.routeToHash(d,n)}}var _;_=r?"#/"+o+"/?"+r:"#/"+o,_A_.Debug.Console.log(["_A_.Go()","routing: "+_.replace("#/","")]),_A_.Settings.historyEnabled&&(_A_.Router.isHashChangeWarm=!0,window.location.hash=_,window.location.hash!=_A_.Router.currentHash&&(_A_.Router.doReplaceHistoryItem=!0)),_A_.Router.routeToHash(_,n)},routeToHash:function(e,n){for(var t=e.replace("#/",""),o=t.split("?"),r=_A_.Utils.stripTrailingSlash(o[0]).split("/"),_=0;_<r.length;_++){var a=r[_].replace("!","");if(!_A_.Settings.routes[a]){if(_A_.Debug.Console.error(["Routing","route not found","route: "+r[_]]),_A_.Settings.fallbackRoute){for(var s=_A_.Settings.fallbackRoute.split("/"),i=0;i<s.length;i++){var l=s[i].replace("!",""),u=_A_.Settings.routes[l];if(!u)return void _A_.Debug.Console.error(["Routing","error with fallbackRoute"])}_A_.Go(_A_.Settings.fallbackRoute)}return}}_A_.Router.forceReload||(_A_.Router.forceReload={});for(var _=0;_<r.length;_++)if(r[_].indexOf("!")!=-1){r[_]=r[_].replace("!","");for(var A=_A_.Settings.routes[r[_]],c=0;c<A.length;c++){var g=A[c][1],p=A[c][0];_A_.Router.forceReload[g]=p}}if(_A_.Settings.routeRules.length>0)for(var _=0;_<r.length;_++)for(var c=0;c<_A_.Settings.routeRules.length;c++)for(var d=0;d<_A_.Settings.routeRules[c].routes.length;d++)if(_A_.Settings.routeRules[c].routes[d]==r[_]){var m;try{m=_A_.Settings.routeRules[c].condition()}catch(f){_A_.Debug.Console.error(["RouteRules","error in condition","RouteRule number: "+c]);continue}if(!m){_A_.Router.doReplaceHistoryItem=!0;var b="#/"+_A_.Settings.routeRules[c].fallback;return _A_.Debug.Console.log(["RouteRules","fallback","RouteRule number: "+c]),_A_.Router.routeToHash(b,n)}}for(var C=Object.keys(_A_.Settings.routes),v=[],_=0;_<r.length;_++)for(var c=0;c<C.length;c++)if(r[_]==C[c]){v.push.apply(v,_A_.Settings.routes[C[c]]);break}o[1]?(_A_.Router.currentHash="#/"+o[0]+"/?"+o[1],_A_.Router.currentRoute=o[0],_A_.Router.currentQueryString=o[1]):(_A_.Router.currentHash="#/"+o[0],_A_.Router.currentRoute=o[0],_A_.Router.currentQueryString=null),_A_.Router.routeTo(v,null,n)},routeTo:function(e,n,t){if(t&&(_A_.Router.callbackArray||(_A_.Router.callbackArray=[]),_A_.Router.callbackArray.push(t)),!e){if(_A_.Debug.Console.error(["Routing","null array"]),_A_.Router.callbackArray){for(var o=0;o<_A_.Router.callbackArray.length;o++)_A_.Router.callbackArray[o]({error:"NullArray"});_A_.Router.callbackArray=null}return _A_.Router.resetVariables(),void(_A_.Router.isHashChangeWarm=!1)}if(0==e.length){if(_A_.Debug.Console.error(["Routing","empty array"]),_A_.Router.callbackArray){for(var o=0;o<_A_.Router.callbackArray.length;o++)_A_.Router.callbackArray[o]({error:"EmptyArray"});_A_.Router.callbackArray=null}return _A_.Router.resetVariables(),void(_A_.Router.isHashChangeWarm=!1)}if(_A_.Router.isRouting)for(var r=e.length,o=0;o<r;o++)_A_.Router.workerArray.push(e[o]);else{if(_A_.Router.isRouting=!0,_A_.Router.workerArray||(_A_.Router.workerArray=[],_A_.Router.workerArray=e.slice(0)),!_A_.Router.workerArray[_A_.Router.count])return _A_.Debug.Console.error(["Routing","null array element"]),_A_.Router.count==_A_.Router.workerArray.length-1&&(_A_.Router.doReplaceHistoryItem=!0),_A_.Router.end(_A_.Router.workerArray,n);_A_.Debug.Console.log(["Routing",_A_.Router.workerArray[_A_.Router.count]]);var _,a;if(_A_.Router.workerArray[_A_.Router.count][0].constructor===Array?(_=_A_.Router.workerArray[_A_.Router.count][0][0],a=_A_.Router.workerArray[_A_.Router.count][0][1]):(_=_A_.Router.workerArray[_A_.Router.count][0],a=null),!_)return _A_.Debug.Console.error(["Routing","Can't find ComponentName in: _A_.Settings.routes."+_A_.Router.workerArray[_A_.Router.count]]),_A_.Router.count==_A_.Router.workerArray.length-1&&(_A_.Router.doReplaceHistoryItem=!0),_A_.Router.end(_A_.Router.workerArray,n);var s=_A_.Settings.components[_];if(!s)return _A_.Debug.Console.error(["Routing","Can't find Component named: "+_]),_A_.Router.count==_A_.Router.workerArray.length-1&&(_A_.Router.doReplaceHistoryItem=!0),_A_.Router.end(_A_.Router.workerArray,n);var i=s.view;if("function"==typeof i&&(i=i()),!i)return _A_.Debug.Console.error(["Routing","Can't find: _A_.Settings.components."+_+".view"]),_A_.Router.count==_A_.Router.workerArray.length-1&&(_A_.Router.doReplaceHistoryItem=!0),_A_.Router.end(_A_.Router.workerArray,n);var l=_A_.Router.workerArray[_A_.Router.count][1];if(!l)return _A_.Debug.Console.error(["Routing","Can't find DivId in: _A_.Settings.routes."+_A_.Router.workerArray[_A_.Router.count]]),_A_.Router.count==_A_.Router.workerArray.length-1&&(_A_.Router.doReplaceHistoryItem=!0),_A_.Router.end(_A_.Router.workerArray,n);"app"!=l&&""!=l||(l="_A_Content");var u=_A_.Router.workerArray[_A_.Router.count][2],A=!1;if(_A_._R_[l])if(_A_.Router.forceReload&&_A_.Router.forceReload[l]&&_A_.Router.forceReload[l]==_)A=!0;else if(_A_._R_[l].componentName==_)return _A_.Debug.Console.log(["Routing","Skipping: "+_+" into: "+l]),_A_.Router.count==_A_.Router.workerArray.length-1&&(_A_.Router.doReplaceHistoryItem=!0),_A_.Router.end(_A_.Router.workerArray,n);var c=document.getElementById(l);if("http"==i.substring(0,4)){var g=document.createElement("object");g.setAttribute("type","text/html"),g.setAttribute("data",i),g.style.position=c.style.position,g.style["float"]=c.style["float"],g.style.top=c.style.top,g.style.left=c.style.left,g.style.width=c.style.width,g.style.height=c.style.height,g.style.marginTop=c.style.marginTop,g.style.marginRight=c.style.marginRight,g.style.marginBottom=c.style.marginBottom,g.style.marginLeft=c.style.marginLeft,g.style.zIndex=c.style.zIndex,"fade"==u&&_A_.Router.cssTransitionSupport||"fade"!=u&&null!=u?"fade"==u&&(g.style.visibility="hidden",g.style.opacity="0",c.classList.remove("_A_Hidden"),c.classList.remove("_A_Fade_In"),c.classList.remove("_A_Fade_Out"),c.classList.add("_A_Fade_Out"),setTimeout(function(){c.parentNode.insertBefore(g,c.nextSibling),g.className=c.className,c.parentNode.removeChild(c),_A_.MemoryManagement.deregisterComponent(l),A&&(c.innerHTML="",_A_.MemoryManagement.garbageCollection()),_A_.MemoryManagement.registerComponent(l,_,a,function(e){g.setAttribute("id",l),("fade"==u&&_A_.Router.cssTransitionSupport||"fade"!=u&&null!=u)&&"fade"==u&&(g.style.display="",g.style.visibility="",g.style.opacity="",g.classList.remove("_A_Hidden"),g.classList.remove("_A_Fade_In"),g.classList.remove("_A_Fade_Out"),g.classList.add("_A_Hidden"),setTimeout(function(){g.classList.remove("_A_Hidden"),g.classList.add("_A_Fade_In")},100)),_A_.Utils.setPageTitle(_),_A_.Router.end(_A_.Router.workerArray,n)})},500)):(g.style.visibility="visible",g.style.opacity="1",c.parentNode.insertBefore(g,c.nextSibling),g.className=c.className,c.parentNode.removeChild(c),_A_.MemoryManagement.deregisterComponent(l),A&&(c.innerHTML="",_A_.MemoryManagement.garbageCollection()),_A_.MemoryManagement.registerComponent(l,_,a,function(e){g.setAttribute("id",l),_A_.Utils.setPageTitle(_),_A_.Router.end(_A_.Router.workerArray,n)}))}else{var p=_A_.Settings.appRoot+i;_A_.Ajax.get(p,null,null,function(t){if("fade"==u&&_A_.Router.cssTransitionSupport||"fade"!=u&&null!=u){if("fade"==u){var o;o="_A_Content"==l?document.createElement("SPAllinsonJS-Content"):document.createElement("div"),o.setAttribute("id","_A_Temp_"+_A_.Router.count),o.style.position=c.style.position,o.style["float"]=c.style["float"],o.style.top=c.style.top,o.style.left=c.style.left,o.style.width=c.style.width,o.style.height=c.style.height,o.style.marginTop=c.style.marginTop,o.style.marginRight=c.style.marginRight,o.style.marginBottom=c.style.marginBottom,o.style.marginLeft=c.style.marginLeft,o.style.zIndex=c.style.zIndex,o.style.visibility="hidden",o.style.opacity="0",o.style.display="none",o.innerHTML=t,c.classList.remove("_A_Hidden"),c.classList.remove("_A_Fade_In"),c.classList.remove("_A_Fade_Out"),c.classList.add("_A_Fade_Out"),setTimeout(function(){o.className=c.className,_A_.MemoryManagement.deregisterComponent(l),A&&(c.innerHTML="",_A_.MemoryManagement.garbageCollection());var r=function(){_A_.MemoryManagement.registerComponent(l,_,a,function(r){if(!o)return _A_.MemoryManagement.deregisterComponent(l),void _A_.Router.end(_A_.Router.workerArray,n);if(o.style.display="block",r){var a=_A_.Inject.init(t,r,e);t=a[0],_A_.Router.workerArray=a[1]}o.innerHTML=t,o.style.display="",o.style.visibility="",o.style.opacity="",o.classList.remove("_A_Hidden"),o.classList.remove("_A_Fade_In"),o.classList.remove("_A_Fade_Out"),o.classList.add("_A_Hidden"),setTimeout(function(){o.classList.remove("_A_Hidden"),o.classList.add("_A_Fade_In")},100),c.parentNode.insertBefore(o,c.nextSibling),c.parentNode.removeChild(c),o.setAttribute("id",l),_A_.Utils.setPageTitle(_),r&&r.viewDidAppear&&"function"==typeof r.viewDidAppear&&r.viewDidAppear(),_A_.Router.end(_A_.Router.workerArray,n)})};_A_.Settings.components[_].controller?_A_.MemoryManagement.Script.loadController(_,function(){r()},function(){r()}):r()},500)}}else{_A_.MemoryManagement.deregisterComponent(l),A&&(c.innerHTML="",_A_.MemoryManagement.garbageCollection());var r=function(){_A_.MemoryManagement.registerComponent(l,_,a,function(e){var o=c;if(!o)return _A_.MemoryManagement.deregisterComponent(l),void _A_.Router.end(_A_.Router.workerArray,n);if(e){var r=_A_.Inject.init(t,e,_A_.Router.workerArray);t=r[0],_A_.Router.workerArray=r[1]}o.innerHTML=t,_A_.Utils.setPageTitle(_),e&&e.viewDidAppear&&"function"==typeof e.viewDidAppear&&e.viewDidAppear(),_A_.Router.end(_A_.Router.workerArray,n)})};_A_.Settings.components[_].controller?_A_.MemoryManagement.Script.loadController(_,function(){r()},function(){r()}):r()}},function(e){_A_.Debug.Console.error(["Routing","Ajax error"])},"cache")}}},end:function(e,n){if(_A_.Router.count<e.length-1)_A_.Router.count+=1,_A_.Router.isRouting=!1,_A_.Router.routeTo(e,n);else{if(!n){for(var t=0;t<e.length;t++){var o=String(e[t][1]);"R_"!=o.substring(0,2)&&"C_"!=o.substring(0,2)||(e.splice(t,1),t--)}if(e.length>0)if(_A_.Settings.historyEnabled){var r=_A_.Router.currentHash?_A_.Settings.appRoot+_A_.Router.currentHash:_A_.Settings.appRoot;_A_.Router.doReplaceHistoryItem?window.history.replaceState(_A_.Router.currentHash,document.title,r):window.history.pushState(_A_.Router.currentHash,document.title,r)}else window.history.replaceState(_A_.Router.currentHash,document.title,_A_.Settings.appRoot)}_A_.MemoryManagement.garbageCollection(),_A_.Router.resetVariables(),_A_.Router.isHashChangeWarm=!1,setTimeout(function(){if(_A_.Router.callbackArray){for(var e=0;e<_A_.Router.callbackArray.length;e++)_A_.Router.callbackArray[e]({});_A_.Router.callbackArray=null}_A_.Note.fire("_A_ROUTING_COMPLETED")},0)}},resetVariables:function(){_A_.Router.isRouting=!1,_A_.Router.count=0,_A_.Router.workerArray=null,_A_.Router.doReplaceHistoryItem=!1,_A_.Router.forceReload=null;for(var e=Object.keys(_A_.RepaintHelper),n=0;n<e.length;n++)_A_.RepaintHelper[e[n]].isRepainting=!1}},_A_.Utils={isCssFeatureSupported:function(e){var n=document.createElement("div");if(void 0!==n.style[e])return!0;for(var t="Webkit Moz ms O".split(" "),o=e.charAt(0).toUpperCase()+e.substr(1),r=0;r<t.length;r++)if(void 0!==n.style[t[r]+o])return!0;return!1},setPageTitle:function(e){var n=_A_.Settings.components[e].pageTitle;n&&(_A_.Debug.Console.log(["Set Page Title","component name: "+e,"title: "+n]),document.title=n)},stripLeadingSlash:function(e){return"/"==e.substr(0,1)?e.substr(1):e},stripTrailingSlash:function(e){return"/"==e.substr(e.length-1,1)?e.substr(0,e.length-1):e}},_A_.Ajax={cache:{},get:function(e,n,t,o,r,_){_A_.Ajax.request("GET",e,n,t,o,r,_)},post:function(e,n,t,o,r,_){_A_.Ajax.request("POST",e,n,t,o,r,_)},put:function(e,n,t,o,r,_){_A_.Ajax.request("PUT",e,n,t,o,r,_)},"delete":function(e,n,t,o,r,_){_A_.Ajax.request("DELETE",e,n,t,o,r,_)},patch:function(e,n,t,o,r,_){_A_.Ajax.request("PATCH",e,n,t,o,r,_)},request:function(e,n,t,o,r,_,a){if(_A_.Debug.Console.log(["_A_.Ajax()","method: "+e,"url: "+n,"headers:",t,"body:",o,"cache: "+a]),!e)return void _A_.Debug.Console.error(["_A_.Ajax()","null method"]);if(!n)return void _A_.Debug.Console.error(["_A_.Ajax()","null url"]);if(!r)return void _A_.Debug.Console.error(["_A_.Ajax()","null success callback"]);if(!_)return void _A_.Debug.Console.error(["_A_.Ajax()","null error callback"]);var s=0;if(a)if(_A_.Ajax.cache[n]){for(var i=!1,l=0;l<_A_.Ajax.cache[n].length;l++){var u=_A_.Ajax.cache[n][l],A=u[0],c=u[1],g=u[2];if(e==A&&JSON.stringify(t)==JSON.stringify(c)&&JSON.stringify(o)==JSON.stringify(g)){if("cache"==a){try{r(u[3])}catch(p){_A_.Debug.Console.error(["_A_.Ajax()","success callback error"])}return null}if("update-cache"==a){s=l,i=!0;break}if("clear-cache"==a){_A_.Ajax.cache[n].splice(l,1),i=!0;break}}}i||"cache"!=a&&"update-cache"!=a||(s=_A_.Ajax.cache[n].length,_A_.Ajax.cache[n].push([]))}else"cache"!=a&&"update-cache"!=a||(_A_.Ajax.cache[n]=[[]]);var d=n;!a||"update-cache"!=a&&"clear-cache"!=a||(d+="?"+(new Date).getTime());var m=new XMLHttpRequest;if(m.open(e,d),m.onreadystatechange=function(){if(4==m.readyState&&m.status>0&&m.status<400){var i;i=void 0===m.response?m.responseText:m.response,"cache"!=a&&"update-cache"!=a||(_A_.Ajax.cache[n][s]=[e,t,o,i]);try{r(i)}catch(l){_A_.Debug.Console.error(["_A_.Ajax()","success callback error"])}}else if(4==m.readyState&&m.status>=400&&m.status<500){var i;i=void 0===m.response?m.responseText:m.response;try{_({status:m.status,statusText:m.statusText,response:i})}catch(l){_A_.Debug.Console.error(["_A_.Ajax()","400 error callback error"])}}else if(4==m.readyState&&0==m.status)try{_({status:500,statusText:"",response:""})}catch(l){_A_.Debug.Console.error(["_A_.Ajax()","500 error callback error"])}},null!=t)for(var l=0;l<t.length;l++)m.setRequestHeader(t[l].key,t[l].value);return m.send(o),m}},_A_.MemoryManagement={Script:{load:function(e,n,t){if(e){n||_A_.Debug.Console.warning(["_A_.MemoryManagement.Script.load()","success callback is null",e]),t||_A_.Debug.Console.warning(["_A_.MemoryManagement.Script.load()","error callback is null",e]);for(var o=document.getElementsByTagName("head")[0].getElementsByTagName("script"),r=0;r<o.length;r++){var _=o[r];if(_.getAttribute("src")==e){if(_A_.Debug.Console.log(["_A_.MemoryManagement.Script.load()","skipping",e]),n)try{n()}catch(a){_A_.Debug.Console.error(["_A_.MemoryManagement.Script.load()","success callback error",e])}return}}_A_.Debug.Console.log(["_A_.MemoryManagement.Script.load()","loading",e]);var s=document.createElement("script");s.type="text/javascript",s.readyState?s.onreadystatechange=function(){if("loaded"==s.readyState||"complete"==s.readyState)if(s.onreadystatechange=null,this.status>=200&&this.status<400){if(_A_.Debug.Console.log(["_A_.MemoryManagement.Script.load()","loaded",e]),
n)try{n()}catch(o){_A_.Debug.Console.error(["_A_.MemoryManagement.Script.load()","success callback error",e])}}else if(_A_.Debug.Console.error(["_A_.MemoryManagement.Script.load()","error loading script",e]),t)try{t()}catch(o){_A_.Debug.Console.error(["_A_.MemoryManagement.Script.load()","error callback error",e])}}:(s.onload=function(){if(_A_.Debug.Console.log(["_A_.MemoryManagement.Script.load()","loaded",e]),n)try{n()}catch(t){_A_.Debug.Console.error(["_A_.MemoryManagement.Script.load()","success callback error",e])}},s.onerror=function(n){if(_A_.Debug.Console.error(["_A_.MemoryManagement.Script.load()","error loading script",e]),t)try{t()}catch(n){_A_.Debug.Console.error(["_A_.MemoryManagement.Script.load()","error callback error",e])}}),s.src=e,document.getElementsByTagName("head")[0].appendChild(s)}else if(_A_.Debug.Console.error(["_A_.MemoryManagement.Script.load()","url is null"]),t)try{t()}catch(a){_A_.Debug.Console.error(["_A_.MemoryManagement.Script.load()","error callback error",e])}},unload:function(e){if(!e)return void _A_.Debug.Console.error(["_A_.MemoryManagement.Script.unload()","url is null"]);for(var n=document.getElementsByTagName("head")[0].getElementsByTagName("script"),t=0;t<n.length;t++){var o=n[t];if(o.getAttribute("src")==e){_A_.Debug.Console.log(["_A_.MemoryManagement.Script.unload()",e]),document.getElementsByTagName("head")[0].removeChild(o);break}}},loadController:function(e,n,t){if(!e)return void t();if(!_A_.Settings.components[e])return void t();var o=_A_.Settings.components[e].controller;_A_.MemoryManagement.Script.load(o,n,t)},unloadController:function(e){if(e&&_A_.Settings.components[e]){var n=_A_.Settings.components[e].controller;_A_.MemoryManagement.Script.unload(n)}}},registerComponent:function(divId,componentName,componentData,callback){_A_._R_[divId]||(_A_._R_[divId]={});var controllerDefinition=_A_.Settings.components[componentName].controller,controllerImport=_A_.Controllers[componentName];if(controllerDefinition||controllerImport){_A_._I_[componentName]||(_A_._I_[componentName]={});var componentIndex=1,instancesDict=_A_._I_[componentName],noKeys=Object.keys(instancesDict).length,lastInstance=instancesDict[Object.keys(instancesDict)[noKeys-1]];if(lastInstance){var tempArray=lastInstance.me.split("'");componentIndex=parseInt(tempArray[3])+1}var tempMe="_A_._I_['"+componentName+"']['"+componentIndex+"']";_A_._R_[divId].componentName=componentName,_A_._R_[divId].componentIndex=componentIndex,_A_.RepaintHelper[tempMe]={},_A_.RepaintHelper[tempMe].divId=divId;var tempServiceInstanceArray=[],tempServicesArray=_A_.Settings.components[componentName].services;if(tempServicesArray)for(var i=0;i<tempServicesArray.length;i++){var tempInstance;try{tempInstance=new _A_.Services[tempServicesArray[i]],tempServiceInstanceArray.push(tempInstance)}catch(e){_A_.Debug.Console.error(["Register Component","service not found","service name: "+tempServicesArray[i],"component name: "+componentName])}}for(var tempString="new _A_.Controllers['"+componentName+"'](",i=0;i<tempServiceInstanceArray.length;i++)tempString+="tempServiceInstanceArray["+i+"]",i!=tempServiceInstanceArray.length-1&&(tempString+=",");tempString+=");";var instance=eval(tempString);_A_._I_[componentName][componentIndex.toString()]=instance,instance.me=tempMe,instance.model=componentData?componentData:{},instance.init&&"function"==typeof instance.init&&instance.init(),callback(instance)}else _A_._R_[divId].componentName=componentName,callback(null)},deregisterComponent:function(e){if(_A_._R_[e]){var n=_A_._R_[e].componentName,t=_A_.Settings.components[n].controller,o=_A_.Controllers[n];if(!t&&!o)return void delete _A_._R_[e];var r=_A_._R_[e].componentIndex,_="_A_._I_["+n+"]["+r+"]";delete _A_.RepaintHelper[_],delete _A_._R_[e];var a=_A_._I_[n][r],s=function(){if(delete _A_._I_[n][r],0==Object.keys(_A_._I_[n])&&delete _A_._I_[n],_A_.Settings.scriptManagementEnabled){var e=_A_.Settings.components[n].controller;for(var t in _A_._R_){if(n==_A_._R_[t].componentName)return;var o=_A_.Settings.components[_A_._R_[t].componentName].controller;if(e&&o&&e==o)return}_A_.MemoryManagement.Script.unloadController(n)}};a.dealloc&&"function"==typeof a.dealloc?a.dealloc(s):s()}},garbageCollection:function(){var e=[];for(var n in _A_._R_){var t=document.getElementById(n);t||(e.push(n),_A_.MemoryManagement.deregisterComponent(n))}_A_.Debug.Console.log(["Performing Garbage Collection",e])}},_A_.Inject={init:function(e,n,t){if(null!=_A_.Locale.localizations&&(e=_A_.Locale.apply(e)),n){var o=_A_.Inject.component(e,n);e=o[0];for(var r=0;r<o[1].length;r++)t.splice(t.length+r,0,o[1][r]);var _=_A_.Inject.repeat(e,n);e=_[0];for(var r=0;r<_[1].length;r++)t.splice(t.length+r,0,_[1][r]);e=_A_.Inject.bind(e,n)}return e=_A_.Inject.eval(e,n),n&&(e=e.replace(/_C_/g,n.me)),[e,t]},component:function(response,instance){var arrayOfRoutesToReturn=[],injectionArray=response.match(/\[C:(.*?)\]/g);if(!injectionArray)return[response,arrayOfRoutesToReturn];for(var i=0;i<injectionArray.length;i++){var htmlString="",tempValue=injectionArray[i].replace(/ /g,"").replace("[C:","").replace("]",""),tempArray=tempValue.split(","),tempComponentName=tempArray[0],tempComponentData=tempArray[1];if(tempComponentName)if(_A_.Settings.components[tempComponentName]){var meComponentCount=instance._A_Component_Count,componentCount=meComponentCount?meComponentCount:1,tempId="C_"+componentCount+"_."+instance.me;if(tempComponentData){var tempData;try{tempData=eval(instance.me+"."+tempComponentData)}catch(e){}if(void 0===tempData){_A_.Debug.Console.error(["[C: ]","error in data","component name: "+tempComponentName]),response=response.replace(injectionArray[i],htmlString);continue}arrayOfRoutesToReturn.push([[tempComponentName.toString(),tempData],tempId.toString()])}else arrayOfRoutesToReturn.push([tempComponentName.toString(),tempId.toString()]);htmlString+='<component id="'+tempId+'"></component>',componentCount+=1,instance._A_Component_Count=componentCount,response=response.replace(injectionArray[i],htmlString)}else _A_.Debug.Console.error(["[C: ]","component not found","component name: "+tempComponentName]),response=response.replace(injectionArray[i],htmlString);else _A_.Debug.Console.error(["[C: ]","null component name"]),response=response.replace(injectionArray[i],htmlString)}return[response,arrayOfRoutesToReturn]},repeat:function(response,instance){var arrayOfRoutesToReturn=[],injectionArray=response.match(/\[R:(.*?)\]/g);if(!injectionArray)return[response,arrayOfRoutesToReturn];for(var i=0;i<injectionArray.length;i++){var tempValue=injectionArray[i].replace(/ /g,"").replace("[R:","").replace("]",""),tempArray=tempValue.split(","),tempComponentName=tempArray[0],tempComponentData=tempArray[1];if(tempComponentName)if(tempComponentData)if(_A_.Settings.components[tempComponentName]){var tempDataArray;try{tempDataArray=eval(instance.me+"."+tempComponentData)}catch(e){}if(void 0!==tempDataArray)if(tempDataArray){for(var meDivCount=instance._A_Repeat_Count,divCount=meDivCount?meDivCount:1,htmlString="",ii=0;ii<tempDataArray.length;ii++){var tempId="R_"+divCount+"_."+instance.me;htmlString+='<repeat id="'+tempId+'"></repeat>',arrayOfRoutesToReturn.push([[tempComponentName.toString(),tempDataArray[ii]],tempId.toString()]),divCount+=1}instance._A_Repeat_Count=divCount,response=response.replace(injectionArray[i],htmlString)}else _A_.Debug.Console.warning(["[R: ]","null array","component name: "+tempComponentName]),response=response.replace(injectionArray[i],"");else _A_.Debug.Console.error(["[R: ]","error in data","component name: "+tempComponentName]),response=response.replace(injectionArray[i],"")}else _A_.Debug.Console.error(["[R: ]","component not found","component name: "+tempComponentName]),response=response.replace(injectionArray[i],"");else _A_.Debug.Console.error(["[R: ]","null data","component name: "+tempComponentName]),response=response.replace(injectionArray[i],"");else _A_.Debug.Console.error(["[R: ]","null component name"]),response=response.replace(injectionArray[i],"")}return[response,arrayOfRoutesToReturn]},bind:function(response,instance){var bindingArray=response.match(/\[B:(.*?)\]/g);if(!bindingArray)return response;instance._A_Bind_Array||(instance._A_Bind_Array=[]);for(var divCount=0,workerArray=[],i=0;i<bindingArray.length;i++){var propertyAddress=bindingArray[i].replace(/ /g,"").replace("[B:","").replace("]","");if(propertyAddress){var tempValue;try{tempValue=eval(instance.me+"."+propertyAddress)}catch(e){}if(void 0!==tempValue){var tempId="B_"+divCount+"_."+instance.me;response=null==tempValue?response.replace(bindingArray[i],'<bind id="'+tempId+'"></bind>'):response.replace(bindingArray[i],'<bind id="'+tempId+'">'+tempValue+"</bind>"),instance._A_Bind_Array.push(propertyAddress),divCount+=1}else _A_.Debug.Console.error(["[B: ]","error in data","property: "+propertyAddress]),response=response.replace(bindingArray[i],"")}else _A_.Debug.Console.error(["[B: ]","data not specified","component: "+instance.me]),response=response.replace(bindingArray[i],"")}return response},eval:function(response,instance){var evalArray=response.match(/\[E:(.*?)\]/g);if(!evalArray)return response;for(var i=0;i<evalArray.length;i++){var toBeEvaluated=evalArray[i].replace("[E:","").replace("]","");if(toBeEvaluated){var usingController=toBeEvaluated.match(/\_C_/g);if(!usingController||instance.me){usingController&&(toBeEvaluated=toBeEvaluated.replace(/_C_/g,instance.me));var tempData;try{tempData=eval(toBeEvaluated)}catch(e){}void 0!==tempData?response=response.replace(evalArray[i],tempData):(_A_.Debug.Console.error(["[E: ]","error in data","data: "+toBeEvaluated]),response=response.replace(evalArray[i],""))}else _A_.Debug.Console.error(["[E: ]","No controller found for view","expression: "+evalArray[i]]),response=response.replace(evalArray[i],"")}else _A_.Debug.Console.error(["[E: ]","null data"]),response=response.replace(evalArray[i],"")}return response}},_A_.Note={notes:{},register:function(e,n,t){return e?n?n.me?t?(_A_.Debug.Console.log(["_A_.Note.register()","name: "+e,"component: "+n.me,"handler: "+t]),_A_.Note.notes[e]||(_A_.Note.notes[e]={}),void(_A_.Note.notes[e][n.me]=t)):void _A_.Debug.Console.error(["_A_.Note.register()","name: "+e,"component: "+n.me,"null handler"]):void _A_.Debug.Console.error(["_A_.Note.register()","name: "+e,"null component.me"]):void _A_.Debug.Console.error(["_A_.Note.register()","name: "+e,"null component"]):void _A_.Debug.Console.error(["_A_.Note.register()","null notification name"])},deregister:function(e,n){return e?n?n.me?_A_.Note.notes[e]?(_A_.Debug.Console.log(["_A_.Note.deregister()","name: "+e,"component: "+n.me]),_A_.Note.notes[e][n.me]?delete _A_.Note.notes[e][n.me]:_A_.Debug.Console.warning(["_A_.Note.deregister()","name: "+e,"component not registered"]),void(0==Object.keys(_A_.Note.notes[e])&&delete _A_.Note.notes[e])):void _A_.Debug.Console.warning(["_A_.Note.deregister()","name: "+e,"name not found"]):void _A_.Debug.Console.error(["_A_.Note.deregister()","name: "+e,"null component.me"]):void _A_.Debug.Console.error(["_A_.Note.deregister()","name: "+e,"null component"]):void _A_.Debug.Console.error(["_A_.Note.deregister()","null name"])},deregisterFromAll:function(e){if(!e)return void _A_.Debug.Console.error(["_A_.Note.deregisterFromAll()","null component"]);if(!e.me)return void _A_.Debug.Console.error(["_A_.Note.deregisterFromAll()","null component.me"]);_A_.Debug.Console.log(["_A_.Note.deregisterFromAll()","component: "+e.me]);for(var n=Object.keys(_A_.Note.notes),t=0;t<n.length;t++)_A_.Note.notes[n[t]][e.me]&&(delete _A_.Note.notes[n[t]][e.me],0==Object.keys(_A_.Note.notes[n[t]])&&delete _A_.Note.notes[n[t]])},fire:function(e,n){if(!e)return void _A_.Debug.Console.error(["_A_.Note.fire()","null name"]);_A_.Debug.Console.log(["_A_.Note.fire()","name: "+e,"data: "+n]);var t=_A_.Note.notes[e];if(t)for(var o=Object.keys(t),r=0;r<o.length;r++){var _=t[o[r]];if(n)try{_(n)}catch(a){_A_.Debug.Console.error(["_A_.Note.fire()","name: "+e,"invalid handler"])}else try{_()}catch(a){_A_.Debug.Console.error(["_A_.Note.fire()","name: "+e,"invalid handler"])}}}},_A_.Locale={defaultLanguage:null,localizations:null,getLang:function(){return void 0===navigator.languages?navigator.language:navigator.languages[0]},apply:function(e){var n=e.match(/\[L:(.*?)\]/g);if(!n)return e;for(var t=0;t<n.length;t++){var o=n[t].replace(/ /g,"").replace("[L:","").replace("]","");if(o){var r=_A_.Locale.get(o);r?e=e.replace(n[t],r):(_A_.Debug.Console.error(["[L: ]","key not found","key: "+o]),e=e.replace(n[t],""))}else _A_.Debug.Console.error(["[L: ]","null key"]),e=e.replace(n[t],"")}return e},get:function(e){if(!e)return _A_.Debug.Console.error(["_A_.Locale.get()","null key"]),null;if(!_A_.Locale.localizations)return _A_.Debug.Console.error(["_A_.Locale.get()","_A_.Locale.localizations not found"]),null;_A_.Debug.Console.log(["_A_.Locale.get()","key: "+e]);var n,t=_A_.Locale.getLang();if(n=_A_.Locale.localizations[t]){var o=n[e];if(o)return o}var r=t.split("-");if(n=_A_.Locale.localizations[r[0]]){var o=n[e];if(o)return o}if(_A_.Locale.defaultLanguage&&(n=_A_.Locale.localizations[_A_.Locale.defaultLanguage])){var o=n[e];if(o)return o}return _A_.Locale.defaultLanguage||_A_.Debug.Console.warning(["_A_.Locale.get()","_A_.Locale.defaultLanguage not found"]),_A_.Debug.Console.error(["_A_.Locale.get()","key: "+e]),null}},_A_.Go=function(e,n){return e?""==e?(_A_.Debug.Console.error(["_A_.Go()","empty route"]),void(n&&n({error:"EmptyRoute"}))):void _A_.Router.goHelper(e,n):(_A_.Debug.Console.error(["_A_.Go()","null route"]),void(n&&n({error:"NullRoute"})))},_A_.Get=function(e){if(!e)return _A_.Debug.Console.error(["_A_.Get()","_A_.Get(null)"]),null;if(e.constructor===Array){if(0==e.length)return _A_.Debug.Console.error(["_A_.Get()","empty array"]),null;for(var n=[],t=0;t<e.length;t++){var o=_A_.GetHelper(e[t]);o&&n.push(o)}return 0==n.length?(_A_.Debug.Console.error(["_A_.Get()","no components","div ids: "+e]),null):n}var r=_A_.GetHelper(e);return r?r:(_A_.Debug.Console.error(["_A_.Get()","no components","div ids: "+e]),null)},_A_.GetHelper=function(e){if(!e)return _A_.Debug.Console.error(["_A_.Get()","null div id"]),null;var n=_A_._R_[e];if(!n)return _A_.Debug.Console.error(["_A_.Get()","no component","div id: "+e]),null;var t=n.componentName;if(!t)return _A_.Debug.Console.error(["_A_.Get()","no component","div id: "+e]),null;var o=n.componentIndex;if(!o)return _A_.Debug.Console.error(["_A_.Get()","no component","div id: "+e]),null;var n=_A_._I_[t][o.toString()];return n?n:(_A_.Debug.Logger.error(["_A_.Get()","no component","div id: "+e]),null)},_A_.Component=function(e,n,t,o,r){if(!e)return _A_.Debug.Console.error(["_A_.Component()","null component name"]),null;if(!_A_.Settings.components[e])return _A_.Debug.Console.error(["_A_.Component()","_A_.Settings.components[componentName] does not contain component","component: "+e]),null;if(!n)return _A_.Debug.Console.error(["_A_.Component()","null div id"]),null;var _=document.getElementById(n);if(!_)return _A_.Debug.Console.error(["_A_.Component()","div does not exist"]),null;if(!o)return _A_.Debug.Console.error(["_A_.Component()","null instance"]),null;if(!o.me)return _A_.Debug.Console.error(["_A_.Component()","null instance.me"]),null;var a=o._A_Component_Count,s=a?a:1,i="",l=[],u="C_"+s+"_."+o.me;return i+='<component id="'+u+'"></component>',t?l.push([[e,t],u.toString()]):l.push([e,u.toString()]),s+=1,o._A_Component_Count=s,_.innerHTML=i,_A_.Router.routeTo(l,null,function(){if(r){var e=_A_.Get(u);try{r(e)}catch(n){_A_.Debug.Console.error(["_A_.Component()","callback error","component: "+o.me])}}}),u},_A_.Repeat=function(e,n,t,o,r){if(!e)return _A_.Debug.Console.error(["_A_.Repeat()","null component"]),null;if(!_A_.Settings.components[e])return _A_.Debug.Console.error(["_A_.Repeat()","_A_.Settings.components[componentName] does not contain component","component: "+e]),null;if(!n)return _A_.Debug.Console.error(["_A_.Repeat()","null div id"]),null;var _=document.getElementById(n);if(!_)return _A_.Debug.Console.error(["_A_.Repeat()","div does not exist"]),null;if(!t)return _A_.Debug.Console.error(["_A_.Repeat()","null data"]),null;if(0==t.length&&_A_.Debug.Console.warning(["_A_.Repeat()","empty array"]),!o)return _A_.Debug.Console.error(["_A_.Repeat()","instance is null"]),null;if(!o.me)return _A_.Debug.Console.error(["_A_.Repeat()","instance.me is null"]),null;for(var a=o["_A_Repeat_Count_"+n],s=a?a:1,i="",l=[],u=[],A=0;A<t.length;A++){var c="R_"+s+"_."+n;l.push(c),i+='<repeat id="'+c+'"></repeat>',u.push([[e,t[A]],c.toString()]),s+=1}return o["_A_Repeat_Count_"+n]=s,_.innerHTML=i,_A_.Router.routeTo(u,null,function(){if(r){var e=_A_.Get(l);try{r(e)}catch(n){_A_.Debug.Console.error(["_A_.Repeat()","callback error","component: "+o.me])}}}),l},_A_.Append=function(e,n,t,o,r){if(!e)return _A_.Debug.Console.error(["_A_.Append()","null component"]),null;if(!_A_.Settings.components[e])return _A_.Debug.Console.error(["_A_.Append()","_A_.Settings.components does not contain component","component: "+e]),null;if(!n)return _A_.Debug.Console.error(["_A_.Append()","null div id"]),null;var _=document.getElementById(n);if(!_)return _A_.Debug.Console.warning(["_A_.Append()","div does not exist"]),null;if(!t)return _A_.Debug.Console.error(["_A_.Append()","null data"]),null;if(0==t.length)return _A_.Debug.Console.error(["_A_.Append()","empty array"]),null;if(!o)return _A_.Debug.Console.error(["_A_.Append()","null instance"]),null;if(!o.me)return _A_.Debug.Console.error(["_A_.Append()","null instance.me"]),null;for(var a=o["_A_Repeat_Count_"+n],s=a?a:1,i="",l=[],u=[],A=0;A<t.length;A++){var c="R_"+s+"_."+n;u.push(c),i+='<repeat id="'+c+'"></repeat>',l.push([[e,t[A]],c.toString()]),s+=1}o["_A_Repeat_Count_"+n]=s;var g=document.createElement("div");for(g.innerHTML=i;g.firstChild;)_.appendChild(g.firstChild);return _A_.Router.routeTo(l,null,function(){if(r){var e=_A_.Get(u);try{r(e)}catch(n){_A_.Debug.Console.error(["_A_.Append()","callback error","component: "+o.me])}}}),u},_A_.Rebind=function(e){if(!e)return void _A_.Debug.Console.error(["_A_.Rebind()","null instance"]);if(!e.me)return void _A_.Debug.Console.error(["_A_.Rebind()","null instance.me"]);var n=e._A_Bind_Array;if(!n||0==n.length)return void _A_.Debug.Console.warning(["_A_.Rebind()","instance has no bindings","component: "+e.me]);_A_.Debug.Console.log(["_A_.Rebind()","component: "+e.me]);for(var t=0;t<n.length;t++){var o=document.getElementById("B_"+t+"_."+e.me);if(o){var r=e[n[t]];if(!r)return void _A_.Debug.Console.error(["_A_.Rebind()","error in data","component: "+e.me]);o.innerHTML=r}else _A_.Debug.Console.error(["_A_.Rebind()","div does not exist"])}},_A_.Repaint=function(e,n){if(!e)return void _A_.Debug.Console.error(["_A_.Repaint()","null instance"]);if(!e.me)return void _A_.Debug.Console.error(["_A_.Repaint()","null instance.me"]);var t=_A_.RepaintHelper[e.me].divId;if(void 0===t)return void _A_.Debug.Console.error(["_A_.Repaint()","component error","component: "+e.me]);if(_A_.RepaintHelper[e.me].isRepainting)return void _A_.Debug.Console.error(["_A_.Repaint()","Repaint already in progress","component: "+e.me]);_A_.Debug.Console.log(["_A_.Repaint()","component: "+e.me]),_A_.RepaintHelper[e.me].isRepainting=!0;var o=_A_._R_[t].componentName,r=_A_.Settings.components[o].view;"function"==typeof r&&(r=r());var _=(e.model,document.getElementById(t)),a=_A_.Settings.appRoot+r;_A_.Ajax.get(a,null,null,function(t){var o=!0;_A_.Router.isRouting&&(o=!1);var r=_A_.Inject.init(t,e,[]);if(t=r[0],0!=r[1].length){_A_.Router.workerArray||(_A_.Router.workerArray=[]);for(var a=0;a<r[1].length;a++)_A_.Router.workerArray.push(r[1][a])}if(_.innerHTML="",_A_.MemoryManagement.garbageCollection(),_.innerHTML=t,e.viewDidAppear&&"function"==typeof e.viewDidAppear&&e.viewDidAppear(),_A_.RepaintHelper[e.me].isRepainting=!1,_A_.Router.workerArray)_A_.Router.routeTo(_A_.Router.workerArray,o,n);else if(n)try{n()}catch(s){_A_.Debug.Console.error(["_A_.Repaint()","callback error","component: "+e.me])}},function(n){_A_.Debug.Console.error(["_A_.Repaint()","Ajax error","component: "+e.me])},"cache")},_A_.RepaintHelper={};