var _A_={DebugConsole:null,Container:null,Content:null,Controllers:{},Services:{},Singletons:{},_R_:{},_I_:{},Setup:{init:function(){_A_.Setup.createAppContainer(),_A_.Setup.createAppContentContainer(),_A_.Setup.verifyIsCssTransitionSupported(),_A_.Debug.Console.init(),_A_.Debug.validateAppVariables()&&(_A_.Settings.splash&&_A_.Settings.splash.enabled?_A_.Splash.create(function(){_A_.Splash.load(function(){_A_.Preloader.preloadServicesAndSingletons(function(){_A_.Preloader.preloadComponents(function(){_A_.Splash.applyShowForAtLeast(function(){_A_.Splash.dismiss(function(){_A_.Setup.performInitialRouting()})})})})})}):_A_.Preloader.preloadServicesAndSingletons(function(){_A_.Setup.performInitialRouting()}))},createAppContainer:function(){_A_.Container=document.createElement("SPAllinsonJS-App"),document.body.appendChild(_A_.Container)},createAppContentContainer:function(){_A_.Content=document.createElement("SPAllinsonJS-Content"),_A_.Content.setAttribute("id","_A_Content"),_A_.Content.className="_A_Content",_A_.Container.appendChild(_A_.Content)},verifyIsCssTransitionSupported:function(){_A_.Utils.isCssFeatureSupported("transition")||(_A_.Utils.isCssTransitionSupported=!1,_A_.Settings.splash&&(_A_.Settings.splash.doesFadeOut=!1))},performInitialRouting:function(){var e;if(window.location.hash)e=window.location.hash;else{if(!_A_.Settings.initialRoute)return;e="#/"+_A_.Settings.initialRoute}_A_.Router.doReplaceHistoryItem=!0,_A_.Router.routeToHash(e,function(){_A_.Setup.cleanup()})},cleanup:function(){delete _A_.Preloader,delete _A_.Splash,delete _A_.Setup}},Utils:{isCssTransitionSupported:!0,isCssFeatureSupported:function(e){var t=document.createElement("div");if(void 0!==t.style[e])return!0;for(var n="Webkit Moz ms O".split(" "),o=e.charAt(0).toUpperCase()+e.substr(1),r=0;r<n.length;r++)if(void 0!==t.style[n[r]+o])return!0;return!1},setPageTitle:function(e){var t=_A_.Settings.components[e].pageTitle;t&&(_A_.Debug.Console.log(["Set Page Title","component name: "+e,"title: "+t]),document.title=t)}},Go:function(e,t){return e?""==e?(_A_.Debug.Console.error(["_A_.Go('')","Empty route"]),void(t&&t({error:"EmptyRoute"}))):void _A_.Router.goHelper(e,t):(_A_.Debug.Console.error(["_A_.Go(null)","null route"]),void(t&&t({error:"NullRoute"})))},Get:function(e){if(!e)return _A_.Debug.Console.error(["_A_.Get()","_A_.Get(null)"]),null;if(e.constructor===Array){if(0==e.length)return _A_.Debug.Console.error(["_A_.Get()","empty array"]),null;for(var t=[],n=0;n<e.length;n++){var o=_A_.GetHelper(e[n]);o&&t.push(o)}return 0==t.length?(_A_.Debug.Console.error(["_A_.Get()","Can't find Components for: ","'"+e+"'"]),null):t}var o=_A_.GetHelper(e);return o?o:(_A_.Debug.Console.error(["_A_.Get()","Can't find Component for: ","'"+e+"'"]),null)},GetHelper:function(e){if(!e)return _A_.Debug.Console.error(["_A_.Get()","null divId"]),null;var t=_A_._R_[e];if(!t)return _A_.Debug.Console.error(["_A_.Get()","Can't find component with divId: "+e]),null;var n=t.componentName;if(!n)return _A_.Debug.Console.error(["_A_.Get()","Can't find component with divId: "+e]),null;var o=t.componentIndex;if(!o)return _A_.Debug.Console.error(["_A_.Get()","Can't find component with divId: "+e]),null;var r=_A_._I_[n][o.toString()];return r?r:(_A_.Debug.Logger.error(["_A_.Get()","Can't find component with divId: "+e]),null)},Component:function(componentName,divId,data,me,callback){if(!componentName)return _A_.Debug.Console.error(["_A_.Component()","null component name"]),null;if(!_A_.Settings.components[componentName])return _A_.Debug.Console.error(["_A_.Component()","Can't find component named: "+componentName]),null;if(!divId)return _A_.Debug.Console.error(["_A_.Component()","_A_.Component('"+componentName+"')","divId is null"]),null;var containerDiv=document.getElementById(divId);if(!containerDiv)return _A_.Debug.Console.error(["_A_.Component()","_A_.Component('"+componentName+"', '"+divId+"', "+data+", '"+me+"')","div does not exist"]),null;if(!me)return _A_.Debug.Console.error(["_A_.Component()","_A_.Component('"+componentName+"', '"+divId+"', "+data+")","self.me is null"]),null;var instance;try{instance=eval(me)}catch(e){return _A_.Debug.Console.error(["_A_.Component()","_A_.Component('"+componentName+"', '"+divId+"', "+data+", '"+me+"')","self.me error"]),null}var meComponentCount=eval(me)._A_Component_Count,divCount=meComponentCount?meComponentCount:1,htmlString="",arrayOfRoutesToReturn=[],tempId="C_"+divCount+"_."+me;return htmlString+='<component id="'+tempId+'"></component>',data?arrayOfRoutesToReturn.push([[componentName,data],tempId.toString()]):arrayOfRoutesToReturn.push([componentName,tempId.toString()]),divCount+=1,instance._A_Component_Count=divCount,containerDiv.innerHTML=htmlString,_A_.Router.routeTo(arrayOfRoutesToReturn,null,function(){if(callback){var e=_A_.Get(tempId);try{callback(e)}catch(t){_A_.Debug.Console.error(["_A_.Component()","_A_.Component('"+componentName+"', '"+divId+"', "+data+", '"+me+"', '"+callback+"')","callback error"])}}}),tempId},Repeat:function(componentName,divId,data,me,callback){if(!componentName)return _A_.Debug.Console.error(["_A_.Repeat()","null component name"]),null;if(!_A_.Settings.components[componentName])return _A_.Debug.Console.error(["_A_.Repeat()","Can't find component named: "+componentName]),null;if(!divId)return _A_.Debug.Console.error(["_A_.Repeat()","_A_.Repeat('"+componentName+"')","null divId"]),null;var containerDiv=document.getElementById(divId);if(!containerDiv)return _A_.Debug.Console.error(["_A_.Repeat()","_A_.Repeat('"+componentName+"', '"+divId+"', "+data+", '"+me+"')","div does not exist"]),null;if(!data)return _A_.Debug.Console.error(["_A_.Repeat()","_A_.Repeat('"+componentName+"', '"+divId+"')","null data"]),null;if(0==data.length&&_A_.Debug.Console.warning(["_A_.Repeat()","_A_.Repeat('"+componentName+"', '"+divId+"', [])","empty array"]),!me)return _A_.Debug.Console.error(["_A_.Repeat()","_A_.Repeat('"+componentName+", '"+divId+"', "+data+")","self.me is null"]),null;var instance;try{instance=eval(me)}catch(e){return _A_.Debug.Console.error(["_A_.Repeat()","_A_.Repeat('"+componentName+"', '"+divId+"', "+data+", '"+me+"')","self.me error"]),null}for(var meDivCount=instance["_A_Repeat_Count_"+divId],divCount=meDivCount?meDivCount:1,htmlString="",arrayOfTempIds=[],arrayOfRoutesToReturn=[],i=0;i<data.length;i++){var tempId="R_"+divCount+"_."+divId;arrayOfTempIds.push(tempId),htmlString+='<repeat id="'+tempId+'"></repeat>',arrayOfRoutesToReturn.push([[componentName,data[i]],tempId.toString()]),divCount+=1}return instance["_A_Repeat_Count_"+divId]=divCount,containerDiv.innerHTML=htmlString,_A_.Router.routeTo(arrayOfRoutesToReturn,null,function(){if(callback){var e=_A_.Get(arrayOfTempIds);try{callback(e)}catch(t){_A_.Debug.Console.error(["_A_.Repeat()","_A_.Repeat('"+componentName+"', '"+divId+"', "+data+", '"+me+"', '"+callback+"')","callback error"])}}}),arrayOfTempIds},Append:function(componentName,divId,data,me,callback){if(!componentName)return _A_.Debug.Console.error(["_A_.Append()","null component name"]),null;if(!_A_.Settings.components[componentName])return _A_.Debug.Console.error(["_A_.Append()","Can't find component named: "+componentName]),null;if(!divId)return _A_.Debug.Console.error(["_A_.Append()","_A_.Append('"+componentName+"')","null divId"]),null;var containerDiv=document.getElementById(divId);if(!containerDiv)return _A_.Debug.Console.warning(["_A_.Append()","_A_.Append('"+componentName+"', '"+divId+"', "+data+", '"+me+"')","div does not exist"]),null;if(!data)return _A_.Debug.Console.error(["_A_.Append()","_A_.Append('"+componentName+"')","null data"]),null;if(0==data.length)return _A_.Debug.Console.error(["_A_.Append()","_A_.Append('"+componentName+"')","empty array"]),null;if(!me)return _A_.Debug.Console.error(["_A_.Append()","_A_.Append('"+componentName+"', '"+divId+"', "+data+")","self.me is null"]),null;var instance;try{instance=eval(me)}catch(e){return _A_.Debug.Console.error(["_A_.Append()","_A_.Append('"+componentName+"', '"+divId+"', "+data+", '"+me+"')","self.me error"]),null}for(var meDivCount=instance["_A_Repeat_Count_"+divId],divCount=meDivCount?meDivCount:1,htmlString="",arrayOfRoutesToReturn=[],arrayOfTempIds=[],i=0;i<data.length;i++){var tempId="R_"+divCount+"_."+divId;arrayOfTempIds.push(tempId),htmlString+='<repeat id="'+tempId+'"></repeat>',arrayOfRoutesToReturn.push([[componentName,data[i]],tempId.toString()]),divCount+=1}instance["_A_Repeat_Count_"+divId]=divCount;var tempDiv=document.createElement("div");for(tempDiv.innerHTML=htmlString;tempDiv.firstChild;)containerDiv.appendChild(tempDiv.firstChild);return _A_.Router.routeTo(arrayOfRoutesToReturn,null,function(){if(callback){var e=_A_.Get(arrayOfTempIds);try{callback(e)}catch(t){_A_.Debug.Console.error(["_A_.Append()","_A_.Append('"+componentName+"', '"+divId+"', "+data+", '"+me+"', '"+callback+"')","callback error"])}}}),arrayOfTempIds},Rebind:function(me){if(!me)return void _A_.Debug.Console.error(["_A_.Rebind()","self.me is null"]);var instance;try{instance=eval(me)}catch(e){return void _A_.Debug.Console.error(["_A_.Rebind()","_A_.Rebind('"+me+"')","self.me error"])}var instanceArray=instance._A_Bind_Array;if(!instanceArray||0==instanceArray.length)return void _A_.Debug.Console.warning(["_A_.Rebind()","_A_.Rebind("+me+") has no bindings"]);_A_.Debug.Console.log(["_A_.Rebind()","_A_.Rebind('"+me+"')"]);for(var i=0;i<instanceArray.length;i++){var tempDiv=document.getElementById("B_"+i+"_."+me);if(tempDiv){var tempData;try{tempData=eval(me+"."+instanceArray[i])}catch(e){return void _A_.Debug.Console.error(["_A_.Rebind()","_A_.Rebind("+me+")","error in data"])}tempDiv.innerHTML=tempData}else _A_.Debug.Console.error(["_A_.Rebind()","div does not exist"])}},Repaint:function(me,callback){if(!me)return void _A_.Debug.Console.error(["_A_.Repaint()","null self.me"]);var tempDivId=_A_.RepaintHelper[me].divId;if(void 0===tempDivId)return void _A_.Debug.Console.error(["_A_.Repaint()","Error with self.me: "+me]);if(_A_.RepaintHelper[me].isRepainting)return void _A_.Debug.Console.error(["_A_.Repaint()","Repaint already in progress",me]);var tempInstance;try{tempInstance=eval(me)}catch(e){return void _A_.Debug.Console.error(["_A_.Repaint()","Error with self.me: "+me])}_A_.Debug.Console.log(["_A_.Repaint()",me]),_A_.RepaintHelper[me].isRepainting=!0;var tempComponentName=_A_._R_[tempDivId].componentName,tempComponentView=_A_.Settings.components[tempComponentName].view,tempData=tempInstance.model,tempDiv=document.getElementById(tempDivId),url=_A_.Settings.appRoot+tempComponentView;_A_.Ajax("GET",url,null,null,function(e){var t=!0;_A_.Router.isRouting&&(t=!1);var n=_A_.Inject.init(e,me,[]);if(e=n[0],0!=n[1].length){_A_.Router.workerArray||(_A_.Router.workerArray=[]);for(var o=0;o<n[1].length;o++)_A_.Router.workerArray.push(n[1][o])}tempDiv.innerHTML="",_A_.MemoryManagement.garbageCollection(),tempDiv.innerHTML=e,tempInstance.viewDidLoad(),_A_.RepaintHelper[me].isRepainting=!1,_A_.Router.routeTo(_A_.Router.workerArray,t,callback)},function(e){_A_.Debug.Console.error(["_A_.Repaint()","Ajax error"])},"cache")},RepaintHelper:{},Router:{count:0,currentHash:null,currentRoute:null,currentQueryString:null,doReplaceHistoryItem:!0,isHashChangeWarm:!1,isRouting:!1,callbackArray:null,forceLoadArray:null,workerArray:null,goHelper:function(e,t){var n=e.split("?"),o=n[0],r=n[1];if("/"==o.substr(o.length-1,1)&&(o=o.substr(0,o.length-1)),"./"==o.substr(0,2)){var a=window.location.hash.replace("#/",""),i=a.split("?");a=i[0],"/"==a.substr(a.length-1,1)&&(a=a.substr(0,a.length-1)),o=a+o.substr(1)}if("../"==o.substr(0,3)){var a=window.location.hash.replace("#/",""),i=a.split("?");a=i[0],"/"==a.substr(a.length-1,1)&&(a=a.substr(0,a.length-1));var _=a.split("/");a="";for(var s=0;s<_.length;s++)s!=_.length-1&&(a+="/"+_[s]);o=a+o.substr(2)}"/"==o.substr(0,1)&&(o=o.substr(1));for(var i=o.split("/"),s=0;s<i.length;s++){var l=i[s].replace("!",""),u=_A_.Settings.routes[l];if(!u){if(_A_.Debug.Console.error(["_A_.Go()","Can't find route: "+i[s]]),_A_.Settings.fallbackRoute){for(var d=_A_.Settings.fallbackRoute.split("/"),c=0;c<d.length;c++){var m=_A_.Settings.routes[d[c]];if(!m)return void _A_.Debug.Console.error(["_A_.Go()","error with fallbackRoute"])}_A_.Go(_A_.Settings.fallbackRoute)}return}}var a;a=r?"#/"+o+"/?"+r:"#/"+o,_A_.Debug.Console.log(["_A_.Go('"+a.replace("#/","")+"')"]),_A_.Settings.historyEnabled&&(_A_.Router.isHashChangeWarm=!0,window.location.hash=a,window.location.hash!=_A_.Router.currentHash&&(_A_.Router.doReplaceHistoryItem=!0)),_A_.Router.routeToHash(a,t)},routeToHash:function(passedHash,callback){var tempHash=passedHash.replace("#/",""),tempHashArray=tempHash.split("?");"/"==tempHashArray[0].substr(tempHashArray[0].length-1,1)&&(tempHashArray[0]=tempHashArray[0].substr(0,tempHashArray[0].length-1));var arrayOfParts=tempHashArray[0].split("/");if(_A_.Settings.routeRules)for(var i=0;i<arrayOfParts.length;i++)for(var ii=0;ii<_A_.Settings.routeRules.length;ii++)if(_A_.Settings.routeRules[ii].condition)if(_A_.Settings.routeRules[ii].fallback)if(_A_.Settings.routeRules[ii].routes){for(var iii=0;iii<_A_.Settings.routeRules[ii].routes.length;iii++)if(_A_.Settings.routeRules[ii].routes[iii]==arrayOfParts[i]){var check;try{check=eval(_A_.Settings.routeRules[ii].condition)}catch(e){_A_.Debug.Console.error(["RouteRules","Error in condition of RouteRule number "+ii])}if(!check){_A_.Router.doReplaceHistoryItem=!0;var fallbackHash="#/"+_A_.Settings.routeRules[ii].fallback;return _A_.Router.routeToHash(fallbackHash,callback)}}}else _A_.Debug.Console.error(["RouteRules","routes key does not exist for RouteRule number "+ii]);else _A_.Debug.Console.error(["RouteRules","fallback key does not exist for RouteRule number "+ii]);else _A_.Debug.Console.error(["RouteRules","condition key does not exist for RouteRule number "+ii]);_A_.Router.forceLoadArray=[];for(var arrayOfAllRoutes=Object.keys(_A_.Settings.routes),arrayToRouteTo=[],i=0;i<arrayOfParts.length;i++){if(arrayOfParts[i].indexOf("!")!=-1){arrayOfParts[i]=arrayOfParts[i].replace("!","");var tempArray=_A_.Settings.routes[arrayOfParts[i]];if(!tempArray){if(_A_.Debug.Console.error(["Routing","Can't find route: "+arrayOfParts[i]]),_A_.Settings.fallbackRoute){for(var tempArray2=_A_.Settings.fallbackRoute.split("/"),j=0;j<tempArray2.length;j++){var tempRoute=_A_.Settings.routes[tempArray2[j]];if(!tempRoute)return void _A_.Debug.Console.error(["_A_.Go()","error with fallbackRoute"])}_A_.Go(_A_.Settings.fallbackRoute)}return}for(var ii=0;ii<tempArray.length;ii++)_A_.Router.forceLoadArray.push(!0)}else{var tempArray=_A_.Settings.routes[arrayOfParts[i]];if(!tempArray){if(_A_.Debug.Console.error(["Routing","Can't find route: "+arrayOfParts[i]]),_A_.Settings.fallbackRoute){for(var tempArray2=_A_.Settings.fallbackRoute.split("/"),j=0;j<tempArray2.length;j++){var tempRoute=_A_.Settings.routes[tempArray2[j]];if(!tempRoute)return void _A_.Debug.Console.error(["_A_.Go()","error with fallbackRoute"])}_A_.Go(_A_.Settings.fallbackRoute)}return}for(var ii=0;ii<tempArray.length;ii++)_A_.Router.forceLoadArray.push(!1)}for(var ii=0;ii<arrayOfAllRoutes.length;ii++)if(arrayOfParts[i]==arrayOfAllRoutes[ii]){arrayToRouteTo.push.apply(arrayToRouteTo,_A_.Settings.routes[arrayOfAllRoutes[ii]]);break}}tempHashArray[1]?(_A_.Router.currentHash="#/"+tempHashArray[0]+"/?"+tempHashArray[1],_A_.Router.currentRoute=tempHashArray[0],_A_.Router.currentQueryString=tempHashArray[1]):(_A_.Router.currentHash="#/"+tempHashArray[0],_A_.Router.currentRoute=tempHashArray[0],_A_.Router.currentQueryString=null),_A_.Router.routeTo(arrayToRouteTo,null,callback)},routeTo:function(arrayOfMappingArrays,noIndex,callback){if(callback&&(_A_.Router.callbackArray||(_A_.Router.callbackArray=[]),_A_.Router.callbackArray.push(callback)),!arrayOfMappingArrays){if(_A_.Debug.Console.error(["Routing","Array is null"]),_A_.Router.callbackArray){for(var i=0;i<_A_.Router.callbackArray.length;i++)_A_.Router.callbackArray[i]({error:"NullArray"});_A_.Router.callbackArray=null}return _A_.Router.resetVariables(),void(_A_.Router.isHashChangeWarm=!1)}if(0==arrayOfMappingArrays.length){if(_A_.Debug.Console.error(["Routing","Empty array"]),_A_.Router.callbackArray){for(var i=0;i<_A_.Router.callbackArray.length;i++)_A_.Router.callbackArray[i]({error:"EmptyArray"});_A_.Router.callbackArray=null}return _A_.Router.resetVariables(),void(_A_.Router.isHashChangeWarm=!1)}if(_A_.Router.isRouting)for(var tempCount=arrayOfMappingArrays.length,i=0;i<tempCount;i++)_A_.Router.workerArray.push(arrayOfMappingArrays[i]);else{if(_A_.Router.isRouting=!0,_A_.Router.workerArray||(_A_.Router.workerArray=[],_A_.Router.workerArray=arrayOfMappingArrays.slice(0)),!_A_.Router.workerArray[_A_.Router.count])return _A_.Debug.Console.error(["Routing","Array element is null"]),_A_.Router.count==_A_.Router.workerArray.length-1&&(_A_.Router.doReplaceHistoryItem=!0),_A_.Router.end(_A_.Router.workerArray,noIndex);_A_.Debug.Console.log(["Routing",_A_.Router.workerArray[_A_.Router.count]]);var componentName,componentData;if(_A_.Router.workerArray[_A_.Router.count][0].constructor===Array?(componentName=_A_.Router.workerArray[_A_.Router.count][0][0],componentData=_A_.Router.workerArray[_A_.Router.count][0][1]):(componentName=_A_.Router.workerArray[_A_.Router.count][0],componentData=null),!componentName)return _A_.Debug.Console.error(["Routing","Can't find ComponentName in: _A_.Settings.routes."+_A_.Router.workerArray[_A_.Router.count]]),_A_.Router.count==_A_.Router.workerArray.length-1&&(_A_.Router.doReplaceHistoryItem=!0),_A_.Router.end(_A_.Router.workerArray,noIndex);var component=_A_.Settings.components[componentName];if(!component)return _A_.Debug.Console.error(["Routing","Can't find Component named: "+componentName]),_A_.Router.count==_A_.Router.workerArray.length-1&&(_A_.Router.doReplaceHistoryItem=!0),_A_.Router.end(_A_.Router.workerArray,noIndex);var componentView=component.view;if(!componentView)return _A_.Debug.Console.error(["Routing","Can't find: _A_.Settings.components."+componentName+".view"]),_A_.Router.count==_A_.Router.workerArray.length-1&&(_A_.Router.doReplaceHistoryItem=!0),_A_.Router.end(_A_.Router.workerArray,noIndex);var divId=_A_.Router.workerArray[_A_.Router.count][1];if(!divId)return _A_.Debug.Console.error(["Routing","Can't find DivId in: _A_.Settings.routes."+_A_.Router.workerArray[_A_.Router.count]]),_A_.Router.count==_A_.Router.workerArray.length-1&&(_A_.Router.doReplaceHistoryItem=!0),_A_.Router.end(_A_.Router.workerArray,noIndex);"app"!=divId&&""!=divId||(divId="_A_Content");var optionalTransition=_A_.Router.workerArray[_A_.Router.count][2];if(_A_._R_[divId]&&!_A_.Router.forceLoadArray[_A_.Router.count]&&_A_._R_[divId].componentName==componentName)return _A_.Debug.Console.log(["Routing","Skipping: "+componentName+" into: "+divId]),_A_.Router.count==_A_.Router.workerArray.length-1&&(_A_.Router.doReplaceHistoryItem=!0),_A_.Router.end(_A_.Router.workerArray,noIndex);if("http"==componentView.substring(0,4)){var temp=document.createElement("object");temp.setAttribute("type","text/html"),temp.setAttribute("data",componentView),temp.style.position=document.getElementById(divId).style.position,temp.style["float"]=document.getElementById(divId).style["float"],temp.style.top=document.getElementById(divId).style.top,temp.style.left=document.getElementById(divId).style.left,temp.style.width=document.getElementById(divId).style.width,temp.style.height=document.getElementById(divId).style.height,temp.style.marginTop=document.getElementById(divId).style.marginTop,temp.style.marginRight=document.getElementById(divId).style.marginRight,temp.style.marginBottom=document.getElementById(divId).style.marginBottom,temp.style.marginLeft=document.getElementById(divId).style.marginLeft,temp.style.zIndex=document.getElementById(divId).style.zIndex,"fade"==optionalTransition&&_A_.Utils.isCssTransitionSupported||"fade"!=optionalTransition&&null!=optionalTransition?"fade"==optionalTransition&&(temp.style.visibility="hidden",temp.style.opacity="0",document.getElementById(divId).classList.remove("_A_Hidden"),document.getElementById(divId).classList.remove("_A_Fade_In"),document.getElementById(divId).classList.remove("_A_Fade_Out"),document.getElementById(divId).classList.add("_A_Fade_Out"),setTimeout(function(){document.getElementById(divId).parentNode.insertBefore(temp,document.getElementById(divId).nextSibling),temp.className=document.getElementById(divId).className,document.getElementById(divId).parentNode.removeChild(document.getElementById(divId)),_A_.MemoryManagement.deregisterComponent(divId),_A_.MemoryManagement.registerComponent(divId,componentName,componentData,function(e){temp.setAttribute("id",divId),("fade"==optionalTransition&&_A_.Utils.isCssTransitionSupported||"fade"!=optionalTransition&&null!=optionalTransition)&&"fade"==optionalTransition&&(temp.style.display="",temp.style.visibility="",temp.style.opacity="",temp.classList.remove("_A_Hidden"),temp.classList.remove("_A_Fade_In"),temp.classList.remove("_A_Fade_Out"),temp.classList.add("_A_Hidden"),setTimeout(function(){temp.classList.remove("_A_Hidden"),temp.classList.add("_A_Fade_In")},100)),_A_.Utils.setPageTitle(componentName),_A_.Router.end(_A_.Router.workerArray,noIndex)})},500)):(temp.style.visibility="visible",temp.style.opacity="1",document.getElementById(divId).parentNode.insertBefore(temp,document.getElementById(divId).nextSibling),temp.className=document.getElementById(divId).className,document.getElementById(divId).parentNode.removeChild(document.getElementById(divId)),_A_.MemoryManagement.deregisterComponent(divId),_A_.MemoryManagement.registerComponent(divId,componentName,componentData,function(e){temp.setAttribute("id",divId),_A_.Utils.setPageTitle(componentName),_A_.Router.end(_A_.Router.workerArray,noIndex)}))}else{var url=_A_.Settings.appRoot+componentView;_A_.Ajax("GET",url,null,null,function(response){if("fade"==optionalTransition&&_A_.Utils.isCssTransitionSupported||"fade"!=optionalTransition&&null!=optionalTransition){if("fade"==optionalTransition){var temp;temp="_A_Content"==divId?document.createElement("SPAllinsonJS-Content"):document.createElement("div"),temp.setAttribute("id","_A_Temp_"+_A_.Router.count),temp.style.position=document.getElementById(divId).style.position,temp.style["float"]=document.getElementById(divId).style["float"],temp.style.top=document.getElementById(divId).style.top,temp.style.left=document.getElementById(divId).style.left,temp.style.width=document.getElementById(divId).style.width,temp.style.height=document.getElementById(divId).style.height,temp.style.marginTop=document.getElementById(divId).style.marginTop,temp.style.marginRight=document.getElementById(divId).style.marginRight,temp.style.marginBottom=document.getElementById(divId).style.marginBottom,temp.style.marginLeft=document.getElementById(divId).style.marginLeft,temp.style.zIndex=document.getElementById(divId).style.zIndex,temp.style.visibility="hidden",temp.style.opacity="0",temp.style.display="none",temp.innerHTML=response,document.getElementById(divId).classList.remove("_A_Hidden"),document.getElementById(divId).classList.remove("_A_Fade_In"),document.getElementById(divId).classList.remove("_A_Fade_Out"),document.getElementById(divId).classList.add("_A_Fade_Out"),setTimeout(function(){temp.className=document.getElementById(divId).className,_A_.MemoryManagement.deregisterComponent(divId),_A_.MemoryManagement.loadControllerScript(componentName,function(){_A_.MemoryManagement.registerComponent(divId,componentName,componentData,function(me){if(!temp)return _A_.MemoryManagement.deregisterComponent(divId),void _A_.Router.end(_A_.Router.workerArray,noIndex);temp.style.display="block";var injectArray=_A_.Inject.init(response,me,arrayOfMappingArrays);response=injectArray[0],_A_.Router.workerArray=injectArray[1],temp.innerHTML=response,temp.style.display="",temp.style.visibility="",temp.style.opacity="",temp.classList.remove("_A_Hidden"),temp.classList.remove("_A_Fade_In"),temp.classList.remove("_A_Fade_Out"),temp.classList.add("_A_Hidden"),setTimeout(function(){temp.classList.remove("_A_Hidden"),temp.classList.add("_A_Fade_In")},100),document.getElementById(divId).parentNode.insertBefore(temp,document.getElementById(divId).nextSibling),document.getElementById(divId).parentNode.removeChild(document.getElementById(divId)),temp.setAttribute("id",divId),_A_.Utils.setPageTitle(componentName);var tempInstance=eval(me);tempInstance&&tempInstance.viewDidLoad(),_A_.Router.end(_A_.Router.workerArray,noIndex)})})},500)}}else _A_.MemoryManagement.deregisterComponent(divId),_A_.MemoryManagement.loadControllerScript(componentName,function(){_A_.MemoryManagement.registerComponent(divId,componentName,componentData,function(me){var temp=document.getElementById(divId);if(!temp)return _A_.MemoryManagement.deregisterComponent(divId),void _A_.Router.end(_A_.Router.workerArray,noIndex);var injectArray=_A_.Inject.init(response,me,_A_.Router.workerArray);response=injectArray[0],_A_.Router.workerArray=injectArray[1],temp.innerHTML=response,_A_.Utils.setPageTitle(componentName);var tempInstance=eval(me);tempInstance&&tempInstance.viewDidLoad(),_A_.Router.end(_A_.Router.workerArray,noIndex)})})},function(e){alert(e.response)},"cache")}}},end:function(e,t){if(_A_.Router.count<e.length-1)_A_.Router.count+=1,_A_.Router.isRouting=!1,_A_.Router.routeTo(e,t);else{if(!t){for(var n=!1,o=!1,r=0;r<e.length;r++)"R_"==String(e[r][1]).substring(0,2)?(n=!0,e.splice(r,1),r--):"C_"==String(e[r][1]).substring(0,2)&&(o=!0,e.splice(r,1),r--);if(0==e.length);else if(_A_.Settings.historyEnabled){var a=_A_.Router.currentHash?_A_.Settings.appRoot+_A_.Router.currentHash:_A_.Settings.appRoot;_A_.Router.doReplaceHistoryItem?window.history.replaceState(_A_.Router.currentHash,document.title,a):window.history.pushState(_A_.Router.currentHash,document.title,a)}else window.history.replaceState(_A_.Router.currentHash,document.title,_A_.Settings.appRoot)}_A_.MemoryManagement.garbageCollection(),_A_.Router.resetVariables(),_A_.Router.isHashChangeWarm=!1,setTimeout(function(){if(_A_.Router.callbackArray){for(var e=0;e<_A_.Router.callbackArray.length;e++)_A_.Router.callbackArray[e]({});_A_.Router.callbackArray=null}_A_.Note.fire("_A_ROUTING_COMPLETED")},0)}},resetVariables:function(){_A_.Router.isRouting=!1,_A_.Router.count=0,_A_.Router.workerArray=null,_A_.Router.forceLoadArray=null,_A_.Router.doReplaceHistoryItem=!1;for(var e=Object.keys(_A_.RepaintHelper),t=0;t<e.length;t++)_A_.RepaintHelper[e[t]].isRepainting=!1}},Inject:{init:function(e,t,n){if(null!=_A_.Locale.localizations&&(e=_A_.Locale.apply(e)),t){var o=_A_.Inject.component(e,t);e=o[0];for(var r=0;r<o[1].length;r++)n.splice(n.length+r,0,o[1][r]);var a=_A_.Inject.repeat(e,t);e=a[0];for(var r=0;r<a[1].length;r++)n.splice(n.length+r,0,a[1][r]);e=_A_.Inject.bind(e,t)}return e=_A_.Inject.eval(e,t),t&&(e=e.replace(/_C_/g,t)),[e,n]},component:function(response,me){var arrayOfRoutesToReturn=[],injectionArray=response.match(/\[C:(.*?)\]/g);if(!injectionArray)return[response,arrayOfRoutesToReturn];for(var instance=eval(me),i=0;i<injectionArray.length;i++){var htmlString="",tempValue=injectionArray[i].replace(/ /g,"").replace("[C:","").replace("]",""),tempArray=tempValue.split(","),tempComponentName=tempArray[0],tempComponentData=tempArray[1];if(tempComponentName)if(_A_.Settings.components[tempComponentName]){var meComponentCount=instance._A_Component_Count,componentCount=meComponentCount?meComponentCount:1,tempId="C_"+componentCount+"_."+me;if(tempComponentData){var tempData;try{tempData=eval(me+"."+tempComponentData)}catch(e){_A_.Debug.Console.error(["[C: ]","[C: "+tempComponentName+", "+tempComponentData+" ]","error in data"]),response=response.replace(injectionArray[i],htmlString);continue}arrayOfRoutesToReturn.push([[tempComponentName.toString(),tempData],tempId.toString()])}else arrayOfRoutesToReturn.push([tempComponentName.toString(),tempId.toString()]);htmlString+='<component id="'+tempId+'"></component>',componentCount+=1,instance._A_Component_Count=componentCount,response=response.replace(injectionArray[i],htmlString)}else _A_.Debug.Console.error(["[C: ]","[C: "+tempComponentName+", "+tempComponentData+" ]","Component: "+tempComponentName+" not found"]),response=response.replace(injectionArray[i],htmlString);else _A_.Debug.Console.error(["[C: ]","[C: "+tempComponentName+" ]","null component name"]),response=response.replace(injectionArray[i],htmlString)}return[response,arrayOfRoutesToReturn]},repeat:function(response,me){var arrayOfRoutesToReturn=[],injectionArray=response.match(/\[R:(.*?)\]/g);if(!injectionArray)return[response,arrayOfRoutesToReturn];for(var instance=eval(me),i=0;i<injectionArray.length;i++){var tempValue=injectionArray[i].replace(/ /g,"").replace("[R:","").replace("]",""),tempArray=tempValue.split(","),tempComponentName=tempArray[0],tempComponentData=tempArray[1];if(tempComponentName)if(tempComponentData)if(_A_.Settings.components[tempComponentName]){var tempDataArray;try{tempDataArray=eval(me+"."+tempComponentData)}catch(e){}if(tempDataArray)if(0!=tempDataArray.length){for(var meDivCount=instance._A_Repeat_Count,divCount=meDivCount?meDivCount:1,htmlString="",ii=0;ii<tempDataArray.length;ii++){var tempId="R_"+divCount+"_."+me;htmlString+='<repeat id="'+tempId+'"></repeat>',arrayOfRoutesToReturn.push([[tempComponentName.toString(),tempDataArray[ii]],tempId.toString()]),divCount+=1}instance._A_Repeat_Count=divCount,response=response.replace(injectionArray[i],htmlString)}else _A_.Debug.Console.warning(["[R: ]","[R: "+tempComponentName+" ]","empty array"]),response=response.replace(injectionArray[i],"");else _A_.Debug.Console.error(["[R: ]","[R: "+tempComponentName+", "+tempComponentData+" ]","error in data"]),response=response.replace(injectionArray[i],"")}else _A_.Debug.Console.error(["[R: ]","[R: "+tempComponentName+", "+tempComponentData+" ]","Component: "+tempComponentName+" not found"]),response=response.replace(injectionArray[i],"");else _A_.Debug.Console.error(["[R: ]","[R: "+tempComponentName+" ]","null data"]),response=response.replace(injectionArray[i],"");else _A_.Debug.Console.error(["[R: ]","[R: "+tempComponentName+" ]","null component name"]),response=response.replace(injectionArray[i],"")}return[response,arrayOfRoutesToReturn]},bind:function(response,me){var bindingArray=response.match(/\[B:(.*?)\]/g);if(!bindingArray)return response;var instance=eval(me);instance._A_Bind_Array||(instance._A_Bind_Array=[]);for(var divCount=0,workerArray=[],i=0;i<bindingArray.length;i++){var modelProperty=bindingArray[i].replace(/ /g,"").replace("[B:","").replace("]","");if(modelProperty){var tempValue=eval(me+"."+modelProperty);if(void 0!==tempValue){var tempId="B_"+divCount+"_."+me;response=null==tempValue?response.replace(bindingArray[i],'<bind id="'+tempId+'"></bind>'):response.replace(bindingArray[i],'<bind id="'+tempId+'">'+tempValue+"</bind>"),instance._A_Bind_Array.push(modelProperty),divCount+=1}else _A_.Debug.Console.error(["[B: ]","[B: "+modelProperty+" ]","error in data"]),response=response.replace(bindingArray[i],"")}else _A_.Debug.Console.error(["[B: ]",me,"data not specified"]),response=response.replace(bindingArray[i],"")}return response},eval:function(response,me){var evalArray=response.match(/\[E:(.*?)\]/g);if(!evalArray)return response;for(var i=0;i<evalArray.length;i++){var toBeEvaluated=evalArray[i].replace("[E:","").replace("]","");if(toBeEvaluated){var usingController=toBeEvaluated.match(/\_C_/g);if(!usingController||me){usingController&&(toBeEvaluated=toBeEvaluated.replace(/_C_/g,me));var tempData;try{tempData=eval(toBeEvaluated)}catch(e){_A_.Debug.Console.error(["[E: ]","[E: "+toBeEvaluated+" ]","error in data"]),response=response.replace(evalArray[i],"");continue}void 0!==tempData?response=response.replace(evalArray[i],tempData):(_A_.Debug.Console.error(["[E: ]","[E: "+toBeEvaluated+" ]","error in data"]),response=response.replace(evalArray[i],""))}else _A_.Debug.Console.error(["[E: ]","No controller found for view using [E: "+evalArray[i]+" ]"]),
response=response.replace(evalArray[i],"")}else _A_.Debug.Console.error(["[E: ]","null data"]),response=response.replace(evalArray[i],"")}return response}},MemoryManagement:{loadScript:function(e,t){if(e){t||_A_.Debug.Console.warning(["_A_.MemoryManagement.loadScript()",e,"callback is null"]);for(var n=document.getElementsByTagName("head")[0].getElementsByTagName("script"),o=0;o<n.length;o++){var r=n[o];if(r.getAttribute("src")==e){if(_A_.Debug.Console.log(["_A_.MemoryManagement.loadScript()",e,"skipping"]),t)try{return t()}catch(a){return void _A_.Debug.Console.error(["_A_.MemoryManagement.loadScript()",e,"callback error"])}return}}_A_.Debug.Console.log(["_A_.MemoryManagement.loadScript()",e,"loading"]);var i=document.createElement("script");i.type="text/javascript",i.readyState?i.onreadystatechange=function(){if("loaded"==i.readyState||"complete"==i.readyState)if(i.onreadystatechange=null,this.status>=200&&this.status<400){if(_A_.Debug.Console.log(["_A_.MemoryManagement.loadScript()",e,"loaded"]),t)try{t()}catch(n){_A_.Debug.Console.error(["_A_.MemoryManagement.loadScript()",e,"callback error"])}}else if(_A_.Debug.Console.error(["_A_.MemoryManagement.loadScript()",e,"error loading script"]),t)try{t()}catch(o){_A_.Debug.Console.error(["_A_.MemoryManagement.loadScript()",e,"callback error"])}}:(i.onload=function(){if(_A_.Debug.Console.log(["_A_.MemoryManagement.loadScript()",e,"loaded"]),t)try{t()}catch(n){_A_.Debug.Console.error(["_A_.MemoryManagement.loadScript()",e,"callback error"])}},i.onerror=function(n){if(_A_.Debug.Console.error(["_A_.MemoryManagement.loadScript()",e,"error loading script"]),t)try{t(n)}catch(o){_A_.Debug.Console.error(["_A_.MemoryManagement.loadScript()",e,"callback error"])}}),i.src=e,document.getElementsByTagName("head")[0].appendChild(i)}else if(_A_.Debug.Console.error(["_A_.MemoryManagement.loadScript()","url is null"]),t)try{return t()}catch(a){_A_.Debug.Console.error(["_A_.MemoryManagement.loadScript()",e,"callback error"])}},unloadScript:function(e){if(!e)return void _A_.Debug.Console.error(["_A_.MemoryManagement.unloadScript()","url is null"]);for(var t=document.getElementsByTagName("head")[0].getElementsByTagName("script"),n=0;n<t.length;n++){var o=t[n];if(o.getAttribute("src")==e){_A_.Debug.Console.log(["_A_.MemoryManagement.unloadScript()",e]),document.getElementsByTagName("head")[0].removeChild(o);break}}},loadControllerScript:function(e,t){if(!_A_.Settings.components[e])return t();var n=_A_.Settings.components[e].controller;return n?void _A_.MemoryManagement.loadScript(n,t):t()},unloadControllerScript:function(e){if(_A_.Settings.components[e]){var t=_A_.Settings.components[e].controller;t&&_A_.MemoryManagement.unloadScript(t)}},registerComponent:function(divId,componentName,componentData,callback){_A_._R_[divId]||(_A_._R_[divId]={});var controllerDefinition=_A_.Settings.components[componentName].controller,controllerImport=_A_.Controllers[componentName];if(controllerDefinition||controllerImport){_A_._I_[componentName]||(_A_._I_[componentName]={});var componentIndex=1,instancesDict=_A_._I_[componentName],noKeys=Object.keys(instancesDict).length,lastInstance=instancesDict[Object.keys(instancesDict)[noKeys-1]];if(lastInstance){var tempArray=lastInstance.me.split("'");componentIndex=parseInt(tempArray[3])+1}var tempMe="_A_._I_['"+componentName+"']['"+componentIndex+"']";componentData||(componentData={}),_A_._R_[divId].componentName=componentName,_A_._R_[divId].componentIndex=componentIndex,_A_.RepaintHelper[tempMe]={},_A_.RepaintHelper[tempMe].divId=divId;var tempServiceInstanceArray,tempServicesArray=_A_.Settings.components[componentName].services;if(tempServicesArray){tempServiceInstanceArray=[];for(var i=0;i<tempServicesArray.length;i++){var tempInstance;try{tempInstance=eval("new _A_.Services."+tempServicesArray[i]+"();"),tempServiceInstanceArray.push(tempInstance)}catch(e){_A_.Debug.Console.error(["Register Component","service not found","service name: "+tempServicesArray[i],"component name: "+componentName])}}}var tempString="new _A_.Controllers['"+componentName+"'](";if(tempServiceInstanceArray)for(var i=0;i<tempServiceInstanceArray.length;i++)tempString+="tempServiceInstanceArray["+i+"]",i!=tempServiceInstanceArray.length-1&&(tempString+=",");tempString+=");";var instance=eval(tempString);_A_._I_[componentName][componentIndex.toString()]=instance,instance.init(tempMe,componentData),callback(tempMe)}else _A_._R_[divId].componentName=componentName,callback(null)},deregisterComponent:function(divId){if(_A_._R_[divId]){var componentName=_A_._R_[divId].componentName,controllerDefinition=_A_.Settings.components[componentName].controller,controllerImport=_A_.Controllers[componentName];if(!controllerDefinition&&!controllerImport)return void delete _A_._R_[divId];var componentIndex=_A_._R_[divId].componentIndex;delete _A_._R_[divId];var tempMe="_A_._I_["+componentName+"]["+componentIndex+"]";delete _A_.RepaintHelper[tempMe];var instance=eval(_A_._I_[componentName][componentIndex]);instance.dealloc(function(){if(delete _A_._I_[componentName][componentIndex],0==Object.keys(_A_._I_[componentName])&&delete _A_._I_[componentName],_A_.Settings.scriptManagementEnabled){var e=_A_.Settings.components[componentName].controller,t=!0;for(var n in _A_._R_){if(componentName==_A_._R_[n].componentName){t=!1;break}var o=_A_.Settings.components[_A_._R_[n].componentName].controller;if(e&&o&&e==o){t=!1;break}}t&&_A_.MemoryManagement.unloadControllerScript(componentName)}})}},garbageCollection:function(){var e=[];for(var t in _A_._R_){var n=document.getElementById(t);n||(e.push(t),_A_.MemoryManagement.deregisterComponent(t))}_A_.Debug.Console.log(["Performing Garbage Collection",e])}},WindowEvents:{handleResize:function(){_A_.Content.style.width="100%",_A_.Content.style.height="100%"},handleHashChange:function(){_A_.Router.isHashChangeWarm||_A_.Settings.historyEnabled&&(_A_.Router.doReplaceHistoryItem=!0,_A_.Router.routeToHash(window.location.hash)),_A_.Router.isHashChangeWarm=!1},handlePopState:function(e){if(e.state&&_A_.Settings.historyEnabled){var t=e.state.replace("#/","");_A_.Go(t,function(){setTimeout(function(){_A_.Note.fire("_A_HISTORY_TRAVERSED",e.state)},0)})}}},Ajax:function(e,t,n,o,r,a,i){if(_A_.Debug.Console.log(["_A_.Ajax()","method: "+e,"url: "+t,"headers:",n,"body:",o,"cache: "+i]),!e)return void _A_.Debug.Console.error(["_A_.Ajax()","null method"]);if(!t)return void _A_.Debug.Console.error(["_A_.Ajax()","null url"]);var _=0;if(i)if(_A_.AjaxCache[t]){for(var s=!1,l=0;l<_A_.AjaxCache[t].length;l++){var u=_A_.AjaxCache[t][l],d=u[0],c=u[1],m=u[2];if(e==d&&JSON.stringify(n)==JSON.stringify(c)&&JSON.stringify(o)==JSON.stringify(m)){if("cache"==i){try{r(u[3])}catch(A){_A_.Debug.Console.warning(["_A_.Ajax()","error firing success callback"])}return null}if("update-cache"==i){_=l,s=!0;break}if("clear-cache"==i){_A_.AjaxCache[t].splice(l,1),s=!0;break}}}s||"cache"!=i&&"update-cache"!=i||(_=_A_.AjaxCache[t].length,_A_.AjaxCache[t].push([]))}else"cache"!=i&&"update-cache"!=i||(_A_.AjaxCache[t]=[[]]);!i||"update-cache"!=i&&"clear-cache"!=i||(t+="?"+(new Date).getTime());var p=new XMLHttpRequest;if(p.open(e,t),p.onreadystatechange=function(){if(4==p.readyState&&p.status>0&&p.status<400){var s;s=void 0===p.response?p.responseText:p.response,"cache"!=i&&"update-cache"!=i||(_A_.AjaxCache[t][_]=[e,n,o,s]);try{r(s)}catch(l){_A_.Debug.Console.warning(["_A_.Ajax()","error firing success callback"])}}else if(4==p.readyState&&p.status>=400){var s;s=void 0===p.response?p.responseText:p.response;try{a({status:p.status,statusText:p.statusText,response:s})}catch(l){_A_.Debug.Console.warning(["_A_.Ajax()","error firing error callback"])}}else if(4==p.readyState&&0==p.status)try{a({status:500,statusText:"",response:""})}catch(l){_A_.Debug.Console.warning(["_A_.Ajax()","error firing error callback"])}},null!=n)for(var l=0;l<n.length;l++)p.setRequestHeader(n[l].key,n[l].value);return p.send(o),p},AjaxCache:{},Splash:{view:null,dateTimeForShowForAtLeast:null,create:function(e){_A_.Splash.view=document.createElement("SPAllinsonJS-Splash"),_A_.Splash.view.className="_A_Splash",_A_.Container.appendChild(_A_.Splash.view),e()},load:function(e){var t=_A_.Settings.appRoot+_A_.Settings.splash.view;_A_.Ajax("GET",t,null,null,function(t){for(var n=Object.keys(_A_.Settings.splash.imageSuffixForDevicePixelRatio),o=0;o<n.length;o++)if(n[o]==window.devicePixelRatio){var r=_A_.Settings.splash.imageSuffixForDevicePixelRatio[n[o]];t=t.replace(/.png/g,r+".png"),t=t.replace(/.jpg/g,r+".jpg"),t=t.replace(/.jpeg/g,r+".jpeg"),t=t.replace(/.gif/g,r+".gif"),t=t.replace(/.bmp/g,r+".bmp")}return t.indexOf("_A_.Splash.loaded()")==-1?void _A_.Debug.Console.error(["_A_.Splash.loaded()","Can't find _A_.Splash.loaded() in Splash view"]):(t=t.replace("_A_.Splash.loaded()","_A_.Splash.loaded("+e+")"),_A_.Splash.dateTimeForShowForAtLeast=new Date,void(_A_.Splash.view.innerHTML=t))},function(e){alert(e.response)},null)},loaded:function(e){e()},applyShowForAtLeast:function(e){var t=new Date,n=t.getTime()-_A_.Splash.dateTimeForShowForAtLeast.getTime(),o=_A_.Settings.splash.showForAtLeastMills-n;o<0&&(o=0),setTimeout(function(){e()},o)},dismiss:function(e){_A_.Settings.splash.doesFadeOut?(_A_.Splash.view.classList.add("_A_Fade_Out"),setTimeout(function(){_A_.Splash.remove(e)},500)):_A_.Splash.remove(e)},remove:function(e){_A_.Container.removeChild(_A_.Splash.view),e()}},Preloader:{arrayOfComponentsToPreload:[],preloadedServiceSingletonCount:0,preloadedComponentCount:0,preloadServicesAndSingletons:function(callback){for(var tempArrayOfUrls=[],servicesKeys=Object.keys(_A_.Settings.services),i=0;i<servicesKeys.length;i++)tempArrayOfUrls.push(_A_.Settings.services[servicesKeys[i]]);for(var singletonsKeys=Object.keys(_A_.Settings.singletons),i=0;i<singletonsKeys.length;i++)tempArrayOfUrls.push(_A_.Settings.singletons[singletonsKeys[i]]);if(0==tempArrayOfUrls.length)return callback();_A_.Debug.Console.log(["Loading Singletons & Services"]);for(var i=0;i<tempArrayOfUrls.length;i++)_A_.MemoryManagement.loadScript(tempArrayOfUrls[i],function(){if(_A_.Preloader.preloadedServiceSingletonCount+=1,_A_.Preloader.preloadedServiceSingletonCount==tempArrayOfUrls.length){if(singletonsKeys)for(var ii=0;ii<singletonsKeys.length;ii++)eval("window."+singletonsKeys[ii]+" = new _A_.Singletons['"+singletonsKeys[ii]+"']()");callback()}})},preloadComponents:function(e){for(var t=[],n=Object.keys(_A_.Settings.components),o=0;o<n.length;o++)_A_.Settings.components[n[o]].preload&&t.push(n[o]);if(0==t.length)return e();for(var o=0;o<t.length;o++)_A_.Preloader.preloadComponentWorker(t[o],o,t.length,e)},preloadComponentWorker:function(e,t,n,o){_A_.Debug.Console.log(["Preloading",e]),_A_.Preloader.arrayOfComponentsToPreload[t]=document.createElement("SPAllinsonJS-Preloader"),_A_.Preloader.arrayOfComponentsToPreload[t].className="_A_Preloader",_A_.Splash.view.appendChild(_A_.Preloader.arrayOfComponentsToPreload[t]);var r=_A_.Settings.appRoot+_A_.Settings.components[e].view;_A_.Ajax("GET",r,null,null,function(r){_A_.Preloader.arrayOfComponentsToPreload[t].innerHTML=r,_A_.MemoryManagement.loadControllerScript(e,function(){_A_.Debug.Console.log(["Preloaded",e]),_A_.Preloader.preloadedComponentCount+=1,_A_.Preloader.preloadedComponentCount==n&&o()})},function(t){_A_.Debug.Console.error(["Preloading",e]),_A_.Preloader.preloadedComponentCount+=1,_A_.Preloader.preloadedComponentCount==n&&o()},"cache")}},Note:{notes:{},register:function(e,t,n){return e?t?n?(_A_.Debug.Console.log(["_A_.Note.register()","_A_.Note.register('"+e+"')","component: "+t,"callback name: "+n]),_A_.Note.notes[e]||(_A_.Note.notes[e]={}),void(_A_.Note.notes[e][t]=n)):void _A_.Debug.Console.error(["_A_.Note.register()","_A_.Note.register('"+e+"')","component: "+t,"null callback name"]):void _A_.Debug.Console.error(["_A_.Note.register()","_A_.Note.register('"+e+"')","self.me is null"]):void _A_.Debug.Console.error(["_A_.Note.register()","null notification name"])},deregister:function(e,t){return e?t?_A_.Note.notes[e]?(_A_.Debug.Console.log(["_A_.Note.deregister()","_A_.Note.deregister('"+e+"')","component: "+t]),_A_.Note.notes[e][t]?delete _A_.Note.notes[e][t]:_A_.Debug.Console.warning(["_A_.Note.deregister()","_A_.Note.deregister('"+e+"')","Component doesn't seem to be registered to notification: "+e]),void(0==Object.keys(_A_.Note.notes[e])&&delete _A_.Note.notes[e])):void _A_.Debug.Console.error(["_A_.Note.deregister()","_A_.Note.deregister('"+e+"')","Can't find: "+e]):void _A_.Debug.Console.error(["_A_.Note.deregister()","_A_.Note.deregister('"+e+"')","self.me is null"]):void _A_.Debug.Console.error(["_A_.Note.deregister()","null notification name"])},deregisterFromAll:function(e){if(!e)return void _A_.Debug.Console.error(["_A_.Note.deregisterFromAll()","self.me is null"]);_A_.Debug.Console.log(["_A_.Note.deregisterFromAll()","component: "+e]);for(var t=Object.keys(_A_.Note.notes),n=0;n<t.length;n++)_A_.Note.notes[t[n]][e]&&(delete _A_.Note.notes[t[n]][e],0==Object.keys(_A_.Note.notes[t[n]])&&delete _A_.Note.notes[t[n]])},fire:function(notification,passedData){if(!notification)return void _A_.Debug.Console.error(["_A_.Note.fire()","null notification name"]);if(_A_.Debug.Console.log(["_A_.Note.fire()","_A_.Note.fire('"+notification+"')","data:",passedData]),_A_.Note.notes[notification])for(var keysArray=Object.keys(_A_.Note.notes[notification]),i=0;i<keysArray.length;i++){var instance;try{instance=eval(keysArray[i])}catch(e){_A_.Debug.Console.error(["_A_.Note.fire()","A component registered to notification: "+notification+" using an invalid self.me: "+keysArray[i]]);continue}var callbackHandler;if(passedData){if(callbackHandler=instance[_A_.Note.notes[notification][keysArray[i]]],!callbackHandler){_A_.Debug.Console.error(["_A_.Note.fire()","Callback handler null for notification: "+notification+" and self.me: "+keysArray[i]]);continue}try{callbackHandler(passedData)}catch(e){_A_.Debug.Console.error(["_A_.Note.fire()","Callback handler invalid for notification: "+notification+" and self.me: "+keysArray[i]]);continue}}else{if(callbackHandler=instance[_A_.Note.notes[notification][keysArray[i]]],!callbackHandler){_A_.Debug.Console.error(["_A_.Note.fire()","Callback handler null for notification: "+notification+" and self.me: "+keysArray[i]]);continue}try{callbackHandler()}catch(e){_A_.Debug.Console.error(["_A_.Note.fire()","Callback handler invalid for notification: "+notification+" and self.me: "+keysArray[i]]);continue}}}}},Locale:{defaultLanguage:null,localizations:null,get:function(e){if(!e)return _A_.Debug.Console.error(["_A_.Locale.get()","null key"]),null;if(!_A_.Locale.localizations)return _A_.Debug.Console.error(["_A_.Locale.get()","_A_.Locale.localizations not found!"]),null;_A_.Debug.Console.log(["_A_.Locale.get()","_A_.Locale.get('"+e+"')"]);var t,n=_A_.Locale.getLang();if(t=_A_.Locale.localizations[n]){var o=t[e];if(o)return o}var r=n.split("-");if(t=_A_.Locale.localizations[r[0]]){var o=t[e];if(o)return o}if(_A_.Locale.defaultLanguage&&(t=_A_.Locale.localizations[_A_.Locale.defaultLanguage])){var o=t[e];if(o)return o}return _A_.Locale.defaultLanguage||_A_.Debug.Console.warning(["_A_.Locale.defaultLanguage not found!"]),_A_.Debug.Console.error(["_A_.Locale.get()","_A_.Locale.get('"+e+"')"]),null},getLang:function(){return void 0===navigator.languages?navigator.language:navigator.languages[0]},apply:function(e){var t=e.match(/\[L:(.*?)\]/g);if(!t)return e;for(var n=0;n<t.length;n++){var o=t[n].replace(/ /g,"").replace("[L:","").replace("]","");if(o){var r=_A_.Locale.get(o);r?e=e.replace(t[n],r):(_A_.Debug.Console.error(["[L: ]","[L: "+o+" ]","Key not found in _A_.Locale.localizations"]),e=e.replace(t[n],""))}else _A_.Debug.Console.error(["[L: ]","null key"]),e=e.replace(t[n],"")}return e}},Debug:{Console:{buttonMoved:!1,init:function(){_A_.DebugConsole=document.createElement("SPAllinsonJS-Debug-Console"),_A_.DebugConsole.setAttribute("id","_A_.DebugConsole"),_A_.DebugConsole.className="_A_Debug_Console",_A_.DebugConsole.innerHTML='<div class="_A_Debug_Console_Panel up left" id="_A_.DebugConsolePanel"><div class="title">SPAllinsonJS Debug Console</div><div class="tabs-container"><a class="tab logs active" id="_A_.DebugConsolePanelLogsTab" onclick="_A_.Debug.Console.tabPressed(\'logs\')">Logs</a><a class="tab warnings" id="_A_.DebugConsolePanelWarningsTab" onclick="_A_.Debug.Console.tabPressed(\'warnings\')">Warnings</a><a class="tab errors" id="_A_.DebugConsolePanelErrorsTab" onclick="_A_.Debug.Console.tabPressed(\'errors\')">Errors</a></div><div class="content" id="_A_.DebugConsolePanelLogs"></div><div class="content hidden" id="_A_.DebugConsolePanelWarnings"></div><div class="content hidden" id="_A_.DebugConsolePanelErrors"></div><div class="action-bar"><a onclick="_A_.Debug.Console.clear()">Clear</a></div></div><div class="_A_Debug_Console_Button" id="_A_.DebugConsoleButton" onclick="_A_.Debug.Console.buttonPressed()" onmousedown="_A_.Debug.Console.buttonDown()" onmouseup="_A_.Debug.Console.buttonUp()"><span>SPAllinsonJS</span></div>',_A_.Container.appendChild(_A_.DebugConsole)},buttonPressed:function(){if(_A_.Debug.Console.buttonMoved)return void(_A_.Debug.Console.buttonMoved=!1);var e=document.getElementById("_A_.DebugConsolePanel");e.classList.contains("hidden")?e.classList.remove("hidden"):e.classList.add("hidden")},buttonDown:function(){window.addEventListener("mousemove",_A_.Debug.Console.mouseMoved,!1)},buttonUp:function(){window.removeEventListener("mousemove",_A_.Debug.Console.mouseMoved,!1)},mouseMoved:function(e){e.preventDefault(),_A_.Debug.Console.buttonMoved=!0;var t=document.getElementById("_A_.DebugConsole");t.style.top=e.clientY-25+"px",t.style.left=e.clientX-25+"px";var n=document.getElementById("_A_.DebugConsolePanel");n.classList.contains("up")?n.classList.remove("up"):"",n.classList.contains("down")?n.classList.remove("down"):"",e.clientY<window.innerHeight/2?n.classList.add("down"):n.classList.add("up");var n=document.getElementById("_A_.DebugConsolePanel");n.classList.contains("left")?n.classList.remove("left"):"",n.classList.contains("right")?n.classList.remove("right"):"",e.clientX<window.innerWidth/2?n.classList.add("right"):n.classList.add("left")},tabPressed:function(e){var t=document.getElementById("_A_.DebugConsolePanelLogsTab"),n=document.getElementById("_A_.DebugConsolePanelWarningsTab"),o=document.getElementById("_A_.DebugConsolePanelErrorsTab"),r=document.getElementById("_A_.DebugConsolePanelLogs"),a=document.getElementById("_A_.DebugConsolePanelWarnings"),i=document.getElementById("_A_.DebugConsolePanelErrors");switch(t.classList.contains("active")?t.classList.remove("active"):"",n.classList.contains("active")?n.classList.remove("active"):"",o.classList.contains("active")?o.classList.remove("active"):"",r.classList.contains("hidden")?"":r.classList.add("hidden"),a.classList.contains("hidden")?"":a.classList.add("hidden"),i.classList.contains("hidden")?"":i.classList.add("hidden"),e){case"logs":t.classList.add("active"),r.classList.remove("hidden");break;case"warnings":n.classList.add("active"),a.classList.remove("hidden");break;case"errors":o.classList.add("active"),i.classList.remove("hidden")}},clear:function(){var e=document.getElementById("_A_.DebugConsolePanelLogsTab"),t=document.getElementById("_A_.DebugConsolePanelWarningsTab"),n=document.getElementById("_A_.DebugConsolePanelErrorsTab"),o=document.getElementById("_A_.DebugConsolePanelLogs"),r=document.getElementById("_A_.DebugConsolePanelWarnings"),a=document.getElementById("_A_.DebugConsolePanelErrors");e.classList.contains("active")?o.innerHTML="":"",t.classList.contains("active")?r.innerHTML="":"",n.classList.contains("active")?a.innerHTML="":""},log:function(e){_A_.Debug.Console.record("_A_.DebugConsolePanelLogs",e)},warning:function(e){_A_.Debug.Console.record("_A_.DebugConsolePanelWarnings",e)},error:function(e){_A_.Debug.Console.record("_A_.DebugConsolePanelErrors",e)},record:function(e,t){for(var n=document.getElementById(e),o='<div class="_A_Debug_Console_Record">',r=0;r<t.length;r++){var a;a=0==r?"record-title":1==r?"record-description first":"record-description",o+='<span class="'+a+'">'+t[r]+"</span>"}o+="</div>",n.innerHTML+=o}},validateAppVariables:function(){var e=!0;return void 0===_A_.Settings&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings does not exist"]),e=!1),void 0===_A_.Settings.appRoot&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.appRoot does not exist"]),e=!1),void 0===_A_.Settings.initialRoute&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.initialRoute does not exist"]),e=!1),void 0!==_A_.Settings.splash&&(void 0===_A_.Settings.splash.enabled&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.splash.enabled does not exist"]),e=!1),void 0===_A_.Settings.splash.view&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.splash.view does not exist"]),e=!1),void 0===_A_.Settings.splash.doesFadeOut&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.splash.doesFadeOut does not exist"]),e=!1),void 0===_A_.Settings.splash.showForAtLeastMills&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.splash.showForAtLeastMills does not exist"]),e=!1),void 0===_A_.Settings.splash.imageSuffixForDevicePixelRatio&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.splash.imageSuffixForDevicePixelRatio does not exist"]),e=!1)),void 0===_A_.Settings.historyEnabled&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.historyEnabled does not exist"]),e=!1),void 0===_A_.Settings.scriptManagementEnabled&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.scriptManagementEnabled does not exist"]),e=!1),void 0===_A_.Settings.components&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.components does not exist"]),e=!1),void 0===_A_.Settings.fallbackRoute&&_A_.Debug.Console.warning(["_A_.Settings","_A_.Settings.fallbackRoute does not exist"]),void 0===_A_.Settings.routes&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.routes does not exist"]),e=!1),void 0===_A_.Settings.routeRules&&_A_.Debug.Console.warning(["_A_.Settings","_A_.Settings.routeRules does not exist"]),void 0===_A_.Settings.services&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.services does not exist"]),e=!1),void 0===_A_.Settings.singletons&&(_A_.Debug.Console.error(["_A_.Settings","_A_.Settings.singletons does not exist"]),e=!1),e}}};window.addEventListener("load",_A_.Setup.init,!1),window.addEventListener("resize",_A_.WindowEvents.handleResize,!1),window.addEventListener("hashchange",_A_.WindowEvents.handleHashChange,!1),window.addEventListener("popstate",function(e){_A_.WindowEvents.handlePopState(e)},!1);